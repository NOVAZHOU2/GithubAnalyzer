项目名称,项目URL,提交ID,提交者,提交时间,提交信息,提交链接
systemd/systemd,https://github.com/systemd/systemd,67317e2,Luca Boccassi,2025-12-05T14:24:23Z,Translations update from Fedora Weblate (#39998)  Translations update from [Fedora Weblate](https://translate.fedoraproject.org) for [systemd/main](https://translate.fedoraproject.org/projects/systemd/main/).    Current translation status:  ![Weblate translation status](https://translate.fedoraproject.org/widget/systemd/main/horizontal-auto.svg),https://github.com/systemd/systemd/commit/67317e214e7b8aed3aa16eed74f23eb11ca5148c
systemd/systemd,https://github.com/systemd/systemd,bfaf63b,Daniel Rusek,2025-12-05T13:08:36Z,po: Translated using Weblate (Czech)  Currently translated at 100.0% (264 of 264 strings)  Co-authored-by: Daniel Rusek <mail@asciiwolf.com> Translate-URL: https://translate.fedoraproject.org/projects/systemd/main/cs/ Translation: systemd/main,https://github.com/systemd/systemd/commit/bfaf63b509152aca98d2e50b4bd3f622ec7700db
systemd/systemd,https://github.com/systemd/systemd,4b9cb0c,Pavel Borecki,2025-12-05T13:08:35Z,po: Translated using Weblate (Czech)  Currently translated at 100.0% (264 of 264 strings)  Co-authored-by: Pavel Borecki <pavel.borecki@gmail.com> Translate-URL: https://translate.fedoraproject.org/projects/systemd/main/cs/ Translation: systemd/main,https://github.com/systemd/systemd/commit/4b9cb0c39183c17240eba6931c7aa0cdd9dd7fe8
systemd/systemd,https://github.com/systemd/systemd,1239143,Zbigniew Jędrzejewski-Szmek,2025-11-26T21:11:24Z,"machined: add description to varlink server, unify error messages  manager_varlink_init_resolve_hook and manager_varlink_init_userdb are very similar, but one didn't set a description and the other one had an error message which didn't print the offending path.  Define constants for the paths, and also change other similar constants to have slightly shorter names. (It's an ""address"" and ""path"", but we don't need to have both parts in the name, esp. that it makes the name very long.)",https://github.com/systemd/systemd/commit/12391431c233c6512b9501260ed05f2c78066c5a
systemd/systemd,https://github.com/systemd/systemd,9454927,Zbigniew Jędrzejewski-Szmek,2025-12-05T11:12:03Z,"sd-netlink: read error message for NFNL_MSG_BATCH_BEGIN (#39967)  Before: ``` $ unshare --user --map-users=0:$(id -u):1 --map-groups=0:$(id -g):1 build/test-firewall-util /* test_v6 */ src/test/test-firewall-util.c:34: Assertion failed: ""r = fw_nftables_add_masquerade(nfnl, true, AF_INET6, &u1, 128)"" failed with unexpected error: -110/ETIMEDOUT Aborted (core dumped) ```  After: ``` $ unshare --user --map-users=0:$(id -u):1 --map-groups=0:$(id -g):1 /var/build/test-firewall-util /* test_v6 */ test-firewall-util: Failed to add IPv6 masquerade, skipping tests: Operation not permitted /* test_v4 */ test-firewall-util: Failed to add IPv4 masquerade, skipping tests: Operation not permitted ```",https://github.com/systemd/systemd/commit/9454927c76d06ad67282983029f89aa149bcc277
systemd/systemd,https://github.com/systemd/systemd,3c85d99,Colin Walters,2025-12-04T19:00:16Z,"man: Clarify secure-boot-enroll defaults  Clarify in the docs that `if-safe` is the default by noting that in the text for it, but also moving it to the first mentioned option.  Make explicit in `man systemd-boot` that the `secure-boot-enroll` option is specified in the `loader.conf`  Update an outdated comment in boot.c around the same.  Signed-off-by: Colin Walters <walters@verbum.org>",https://github.com/systemd/systemd/commit/3c85d99c79a7ebb5256a97d07724550a9cb42d69
systemd/systemd,https://github.com/systemd/systemd,eb98ddd,Luca Boccassi,2025-11-28T16:56:11Z,"sysupdate: also mention patterns to match in error log on failure  The gpt uuid is not the only thing that needs to match, the pattern does as well, so mention it in the error log if present",https://github.com/systemd/systemd/commit/eb98ddd8b8d522c9de8fb30c0915d254b5e5b853
systemd/systemd,https://github.com/systemd/systemd,d9e894e,Zbigniew Jędrzejewski-Szmek,2025-12-05T10:09:14Z,Fix systemctl start --verbose off-by-one logs (#39927),https://github.com/systemd/systemd/commit/d9e894ef72158cc6433728735867437b4669a888
systemd/systemd,https://github.com/systemd/systemd,53f5aa3,Yu Watanabe,2025-11-30T02:10:02Z,"musl: introduce wrappers for getopt() and getopt_long()  musl's getopt_long() behaves something different in handling optional arguments: ``` $ journalctl _PID=1 _COMM=systemd --since 19:19:01 -n all --follow Failed to add match 'all': Invalid argument ``` This introduces getopt_long_fix() that reorders the passed arguments to make getopt_long() provided by musl works as what we expect.  Also, musl's getopt() always behaves POSIXLY_CORRECT mode, and stops parsing arguments when a non-option string found. Let's always use getopt_long().",https://github.com/systemd/systemd/commit/53f5aa3fd2423b9dac91049a5d4e8df5666cf4b3
systemd/systemd,https://github.com/systemd/systemd,26b2085,Yu Watanabe,2025-12-03T22:58:02Z,include: update kernel headers from v6.18,https://github.com/systemd/systemd/commit/26b2085d54ebbfca8637362eafcb4a8e3faf832f
systemd/systemd,https://github.com/systemd/systemd,84990e0,Yu Watanabe,2025-12-02T16:35:34Z,test-firewall-util: allow to run test-firewall-util  Now fw_nftables_add_masquerade() should return EOPNOTSUPP or so if unprivileged. It is not necessary to skip whole tests earlier.,https://github.com/systemd/systemd/commit/84990e08e5d1dceedb2525e977b07ecc0b172628
systemd/systemd,https://github.com/systemd/systemd,691d63d,Yu Watanabe,2025-12-02T10:27:56Z,"sd-netlink: also read the reply for NFNL_MSG_BATCH_BEGIN message  When we send a batch of nfnl messages, but e.g. without sufficient privilege, the kernel may only return an error message for NFNL_MSG_BATCH_BEGIN and ignore all later messages. So, we need to read the response for the NFNL_MSG_BATCH_BEGIN, and if it is an error ignore the replies for the rest.",https://github.com/systemd/systemd/commit/691d63dbddcb6db4379c58e94325b8115a7bf124
systemd/systemd,https://github.com/systemd/systemd,ea97ca9,Yu Watanabe,2025-12-02T15:28:55Z,"sd-netlink: drop unused ret_messages argument  This is not only unused, the kernel never provide any meaningful reply for batch message. Let's drop it.",https://github.com/systemd/systemd/commit/ea97ca9a06c8c718ae09c601eb092d0d34e975f9
systemd/systemd,https://github.com/systemd/systemd,9917030,Yu Watanabe,2025-12-02T14:02:50Z,"sd-netlink: introduce sd_netlink_ignore_serial()  When we send a message with NLM_F_ACK, but if later we are not interested in the reply and do not want to call sd_netlink_read(), the reply will be stored in the rqueue forever.  Let's introduce a way to ignore received message without waiting reply.",https://github.com/systemd/systemd/commit/991703009ebe994d9513416398d0c6ea3d14bfef
systemd/systemd,https://github.com/systemd/systemd,32682ba,Yu Watanabe,2025-12-02T13:57:53Z,"sd-netlink: introduce netlink_now() and move timespan_to_timestamp()  When sd-event is attached to the sd-netlink object, use the timestamp of the current event, otherwise call now().  This mostly change nothing. Preparation for later change.",https://github.com/systemd/systemd/commit/32682ba02d588cebedf5cd42a8074a9830cf9041
systemd/systemd,https://github.com/systemd/systemd,69646ac,Yu Watanabe,2025-12-03T22:49:36Z,include: fix typo  Follow-up for ec32732043550ec311dfb0e7be4e7f114366dd24.,https://github.com/systemd/systemd/commit/69646ac0e2eb1e20fac4ebada42cb043c325edc8
systemd/systemd,https://github.com/systemd/systemd,1d9a8e4,Alexandru Tocar,2025-12-03T22:28:36Z,man: drop --import-credential mention from systemd-nspawn(1),https://github.com/systemd/systemd/commit/1d9a8e439c084f0b1815b1259a5bc6b1a40adb64
systemd/systemd,https://github.com/systemd/systemd,2253b4c,Daan De Meyer,2025-12-03T09:14:43Z,dissect: Stop refusing external verity settings for mountfsd  These are supported now so no point in refusing them in systemd-dissect,https://github.com/systemd/systemd/commit/2253b4c35d1e77efb65da238c8a4782372b09339
systemd/systemd,https://github.com/systemd/systemd,a308e97,Antonio Alvarez Feijoo,2025-12-02T07:20:13Z,run-generator: use generator_add_symlink(),https://github.com/systemd/systemd/commit/a308e97ad2a2bbbd5d152d581a9901a7f62a5355
systemd/systemd,https://github.com/systemd/systemd,6b892f8,Antonio Alvarez Feijoo,2025-12-02T14:43:22Z,man/inhibit: mention handle-reboot-key operation,https://github.com/systemd/systemd/commit/6b892f85e249525d97f86dc64176e7bedf2b984f
systemd/systemd,https://github.com/systemd/systemd,4ae16cf,Antonio Álvarez Feijoo,2025-12-02T16:56:01Z,"kernel-install: exit with option --json=help (#39974)  In that case, `parse_json_argument()` returns 0.  Follow-up for bdd36c003d9c4c4ca89c92be504615378f61513c (v255).",https://github.com/systemd/systemd/commit/4ae16cf9b7596e7bd70d4ccf58809a3299e903a9
systemd/systemd,https://github.com/systemd/systemd,ce3acf9,Luca Boccassi,2025-12-02T14:16:27Z,"cryptsetup: downgrade dlopen not compiled message to debug  Every other log in this function is debug level, so downgrade this too. Otherwise compiling without libcryptsetup means sd-executor logs at error level when starting any service, regardless of whether it is needed or not.  Fixes https://github.com/systemd/systemd/issues/39968  Follow-up for efaf5a763d6a06645dba8e88ebc15e887d59cbef",https://github.com/systemd/systemd/commit/ce3acf9acbaee0a8859c1e58c22f307ba9b2a3b6
systemd/systemd,https://github.com/systemd/systemd,929ce35,Yu Watanabe,2025-12-02T11:07:37Z,meson: rework include_directories() and finding of tools (#39956)  This is a cleanup in preparation for later additions.,https://github.com/systemd/systemd/commit/929ce35f8d24db3f2e951c2e68cd23856010600d
systemd/systemd,https://github.com/systemd/systemd,722dc73,Lennart Poettering,2025-11-26T10:16:46Z,"machined: in --user mode, restrict register access to our own UID, and that's it  This is a follow-up for 119d332d9c2cf1974b235c8d9e4e3ad821cf436a and ensures the check only is applied to the system instance of machined. It doesn't really apply to the per-user instance, because we never want to permit differently privileged clients access anyway.  (The process_is_owned_by_uid() call might fail if invoked unpriv, hence there's value in not calling it if machined runs in --user mode, it's what makes machined actually work)",https://github.com/systemd/systemd/commit/722dc73699f63118e443dbdfaff1190db6a614b5
systemd/systemd,https://github.com/systemd/systemd,81e79ee,Lennart Poettering,2025-11-28T15:19:58Z,exec-invoke: fix type for gid,https://github.com/systemd/systemd/commit/81e79ee499e3495f5fe01be5fbd9ec058c9cee60
systemd/systemd,https://github.com/systemd/systemd,a3b6ad6,Luca Boccassi,2025-12-01T19:25:25Z,"cgroup-util: fix cg_pid_get_user_unit() to actually query user units  Refactor switched to the wrong implementation for this inline, breaking querying for user units  Fixes https://github.com/systemd/systemd/issues/39949  Follow-up for 015025cba204de79c90e3cf7adf48505b556df4c",https://github.com/systemd/systemd/commit/a3b6ad69ab246b0df462ffd8478969e9b5a4e4ec
systemd/systemd,https://github.com/systemd/systemd,8c5917a,Lennart Poettering,2025-11-27T08:35:48Z,man: remove notes about limitations of unpriv containers that don't apply anymore,https://github.com/systemd/systemd/commit/8c5917a03befc7fd05cf7f80b90bbd6e3a6051c8
systemd/systemd,https://github.com/systemd/systemd,322f6ad,Zbigniew Jędrzejewski-Szmek,2025-12-01T15:09:43Z,"meson: add tools/meson.build  Previously, we looked for scripts in the tools/ directory ad hoc, wherever they were needed. Let's do those checks in one place. The main meson.build file is shrunk somewhat, which is always nice.",https://github.com/systemd/systemd/commit/322f6adbcdda05f2d978a0094a5f6d41b1b9f585
systemd/systemd,https://github.com/systemd/systemd,963bebd,Zbigniew Jędrzejewski-Szmek,2025-12-01T14:35:22Z,"meson: add source dir to include_directories automatically  Quite often we need to specify include_directories('.'). Normally, meson does this automatically, but we specify implicit_include_directories : false, see 30d20907bddfe064cc3437a888dd8f00d14929e4 for an explanation. Passing the include_directories argument through the template layers was rather cumbersome. Let's simplify things by always including the directory of the first source file. This makes the definitions simpler, at the cost of having an unnecessary include directory in the list in some cases.  (Tests are excluded from this change, because they happen to not need this, but also because some tests have source[0] which is a custom target, and we'd need newer meson to support that.)",https://github.com/systemd/systemd/commit/963bebd7b0e688fb1a66199ad28a12046d7ad8ac
systemd/systemd,https://github.com/systemd/systemd,4c3c60c,Zbigniew Jędrzejewski-Szmek,2025-12-01T13:37:22Z,meson: reuse variable in one more place,https://github.com/systemd/systemd/commit/4c3c60c27099e7cbf9ac6fe86540b3c4e03f7650
systemd/systemd,https://github.com/systemd/systemd,0413c78,dependabot[bot],2025-12-01T11:20:07Z,build(deps): bump softprops/action-gh-release from 2.4.1 to 2.5.0  Bumps [softprops/action-gh-release](https://github.com/softprops/action-gh-release) from 2.4.1 to 2.5.0. - [Release notes](https://github.com/softprops/action-gh-release/releases) - [Changelog](https://github.com/softprops/action-gh-release/blob/master/CHANGELOG.md) - [Commits](https://github.com/softprops/action-gh-release/compare/6da8fa9354ddfdc4aeace5fc48d7f679b5214090...a06a81a03ee405af7f2048a818ed3f03bbf83c7b)  --- updated-dependencies: - dependency-name: softprops/action-gh-release   dependency-version: 2.5.0   dependency-type: direct:production   update-type: version-update:semver-minor ...  Signed-off-by: dependabot[bot] <support@github.com>,https://github.com/systemd/systemd/commit/0413c780aec1735eac2a8004e54a54c62ae92256
systemd/systemd,https://github.com/systemd/systemd,05cfef4,dependabot[bot],2025-12-01T11:20:04Z,build(deps): bump super-linter/super-linter from 7.4.0 to 8.3.0  Bumps [super-linter/super-linter](https://github.com/super-linter/super-linter) from 7.4.0 to 8.3.0. - [Release notes](https://github.com/super-linter/super-linter/releases) - [Changelog](https://github.com/super-linter/super-linter/blob/main/CHANGELOG.md) - [Commits](https://github.com/super-linter/super-linter/compare/12150456a73e248bdc94d0794898f94e23127c88...502f4fe48a81a392756e173e39a861f8c8efe056)  --- updated-dependencies: - dependency-name: super-linter/super-linter   dependency-version: 8.3.0   dependency-type: direct:production   update-type: version-update:semver-major ...  Signed-off-by: dependabot[bot] <support@github.com>,https://github.com/systemd/systemd/commit/05cfef4a92c3765a511315e5f6da06ab5ca8a5da
systemd/systemd,https://github.com/systemd/systemd,1a88817,Mike Gilbert,2025-11-29T23:30:28Z,test-kernel-install: respect TMPDIR in expected output,https://github.com/systemd/systemd/commit/1a88817b8396c636e4c301eec0103c6e94f8bdb7
systemd/systemd,https://github.com/systemd/systemd,2fd63f8,Abílio Costa,2025-11-29T03:05:13Z,hwdb: add ProtoArc EM01 NL mouse configuration,https://github.com/systemd/systemd/commit/2fd63f831fb1c19baaf1e2c4967cbb806567d4e2
systemd/systemd,https://github.com/systemd/systemd,a05969f,Fco. Javier F. Serrador,2025-11-29T03:49:48Z,po: Translated using Weblate (Spanish)  Currently translated at 100.0% (264 of 264 strings)  Co-authored-by: Fco. Javier F. Serrador <fserrador@gmail.com> Translate-URL: https://translate.fedoraproject.org/projects/systemd/main/es/ Translation: systemd/main,https://github.com/systemd/systemd/commit/a05969f1524bfed871485f3118eb7a8b1f6af864
systemd/systemd,https://github.com/systemd/systemd,21eb636,Zbigniew Jędrzejewski-Szmek,2025-11-27T14:04:48Z,"sd-notify: print a debug message when sd_notify() succeds  … and also when it fails, in the few cases where this wasn't done already. When I was debugging https://github.com/systemd/systemd/issues/39048, it was quite confusing that we print copious information about D-Bus messages and all other steps we're undertaking, but nothing about the sd-notify messages which are much more important. Add some debug messages for the cases where we didn't print anything. (The case where $NOTIFY_SOCKET is not set in left unchanged. The variable is often left unset and we don't need to spam logs in that trivial case.)",https://github.com/systemd/systemd/commit/21eb636aaad28707bd371bdfd721dea66277e1f5
systemd/systemd,https://github.com/systemd/systemd,f943ab6,Zbigniew Jędrzejewski-Szmek,2025-11-27T12:06:47Z,"systemctl: stop showing last message from previous run  --lines=1 means that we show the last message about the unit, whatever it is:  $ SYSTEMD_LOG_LEVEL=debug systemctl --verbose start demo2 ... Invoking 'journalctl -q --follow --no-pager --lines=1 --synchronize-on-exit=yes --unit=demo2.service' as child. ... Directory /var/log/journal/7d16833bfa924410851e2a193bcfd4ba added. Journal effective settings seal=no keyed_hash=yes compress=ZSTD compress_threshold_bytes=8B ... Reiterating files to get inotify watches established. Considering root directory '/run/log/journal'. Considering root directory '/var/log/journal'. Considering directory '/var/log/journal/7d16833bfa924410851e2a193bcfd4ba'. Nov 26 17:24:35 rawhide systemd[1]: Finished demo2.service. ... Executing dbus call org.freedesktop.systemd1.Manager StartUnit(demo2.service, replace) ... Job for demo2.service finished. Got result done/Success for job demo2.service. journal: Sending message: {""method"":""io.systemd.Journal.Synchronize"",""parameters"":{""offline"":false}} Nov 27 13:05:30 rawhide systemd[1]: Starting demo2.service... Nov 27 13:05:30 rawhide systemd[1]: demo2.service: Deactivated successfully. Nov 27 13:05:30 rawhide systemd[1]: Finished demo2.service. ...  We obviously should only show _new_ messages, hence change to --lines=0. This works properly after the fix in the previous commit.  Fixes #39048.",https://github.com/systemd/systemd/commit/f943ab6efbcdccd6f656fc868f3cf426ebdd3a33
systemd/systemd,https://github.com/systemd/systemd,ef90afd,Zbigniew Jędrzejewski-Szmek,2025-11-27T12:01:59Z,"journal: send READY=1 also when --lines=0 is given  If --lines=0 is given, we'd skip the setup and not invoke sd_notify, potentially blocking the caller. Change the condition for the callback to also include that case. Since then the callback would always be set, the 'if' statement is not necessary anymore.",https://github.com/systemd/systemd/commit/ef90afd59e8f18f78af5a4111aefaa9cea73f048
systemd/systemd,https://github.com/systemd/systemd,68ce283,João Rodrigues,2025-11-26T18:54:03Z,Symlink for the /dev/ptp0 in vmware (#39917)  There are rules to create a symlink for the /dev/ptp0 device in KVM and Hyper-V virtualization infrastructure but not for vmware.,https://github.com/systemd/systemd/commit/68ce283c3f4a63696307cee9addd7b6c333efbd5
systemd/systemd,https://github.com/systemd/systemd,2feb8f5,Yu Watanabe,2025-11-26T18:10:29Z,"Pull in recent changes from Weblate (#39920)  One of the pending commits in Weblate causes conflicts due to an unfortunate timing with 9e929e4aa78a38f822be7aa3da9c11994ad94c07, so let's pull the changes into the main tree manually (and resolve the conflicts).",https://github.com/systemd/systemd/commit/2feb8f58cef072fa4e185c7c1235c45cc4757578
systemd/systemd,https://github.com/systemd/systemd,1fd1001,lumingzh,2025-11-26T02:34:53Z,po: Translated using Weblate (Chinese (Simplified) (zh_CN))  Currently translated at 100.0% (264 of 264 strings)  Translation: systemd/main Translate-URL: https://translate.fedoraproject.org/projects/systemd/main/zh_CN/,https://github.com/systemd/systemd/commit/1fd10016570c31901449eeb043f46eefffdd37c5
systemd/systemd,https://github.com/systemd/systemd,556dc3a,Jesse Guo,2025-11-26T02:32:21Z,po: Translated using Weblate (Chinese (Simplified) (zh_CN))  Currently translated at 100.0% (264 of 264 strings)  Translation: systemd/main Translate-URL: https://translate.fedoraproject.org/projects/systemd/main/zh_CN/,https://github.com/systemd/systemd/commit/556dc3a0f1d0b08ca693f40737ec1510861f25ee
systemd/systemd,https://github.com/systemd/systemd,b9be45f,Mike Yuan,2025-11-26T13:58:32Z,analyze-dlopen-metadata: honor --no-legend and --no-pager,https://github.com/systemd/systemd/commit/b9be45f926789d9d4f6a208040a90d760a61ddb1
systemd/systemd,https://github.com/systemd/systemd,a895fb3,Luca Boccassi,2025-11-26T12:26:56Z,meson: bump version to v259~rc2,https://github.com/systemd/systemd/commit/a895fb38bb615b7ddd29e14d876485701b445eaf
systemd/systemd,https://github.com/systemd/systemd,fc06602,Luca Boccassi,2025-11-26T12:26:45Z,NEWS: finalize date,https://github.com/systemd/systemd/commit/fc06602eb60a44472b18c85a7822e9bb5aa2fb58
systemd/systemd,https://github.com/systemd/systemd,1ceba02,Lennart Poettering,2025-11-26T12:24:57Z,"ci: split out nvpcr test, so that it runs before rest of pcrextend (#39915)  in pcrextend we destroy pcr 11, and if we are booted in a kernel that has pcr11 sigs, we cannot use that signature anymore. hence, let's do the nvpcr test first, before doing the pcrextend stuff.  Fixes: #39582",https://github.com/systemd/systemd/commit/1ceba02ad965a02e28f98d5ebf086eacf6d385b2
systemd/systemd,https://github.com/systemd/systemd,6a9f064,Daan De Meyer,2025-11-25T12:44:03Z,tree-wide: Fix declaration/definition parameter name mismatches,https://github.com/systemd/systemd/commit/6a9f0641cd924a5bb41f63a2b9e18838b11db9b9
systemd/systemd,https://github.com/systemd/systemd,a8374a7,Luca Boccassi,2025-11-26T09:52:33Z,Chores for RC2 (#39901),https://github.com/systemd/systemd/commit/a8374a7607be77fb30b4301eeb54c3e03571009e
systemd/systemd,https://github.com/systemd/systemd,caf7cb2,Yu Watanabe,2025-11-26T07:35:35Z,SD_JSON_BUILD_PAIR() conversions with coccinelle script (#39858),https://github.com/systemd/systemd/commit/caf7cb2737f24ee7c329ec782c112903e79cb413
systemd/systemd,https://github.com/systemd/systemd,b7f892b,Yu Watanabe,2025-11-26T07:29:30Z,core/mount: comprehensively disable mount unit support if no libmount (#39884),https://github.com/systemd/systemd/commit/b7f892b390e7d51c979dc90d248e7895320ad395
systemd/systemd,https://github.com/systemd/systemd,7875d9a,Yu Watanabe,2025-11-26T07:24:42Z,run0: two follow-ups (#39900),https://github.com/systemd/systemd/commit/7875d9a4f6f284522a2cce21974463fd3e92f957
systemd/systemd,https://github.com/systemd/systemd,cffb53d,Mike Yuan,2025-11-25T17:18:29Z,smbios11: use size_add() where appropriate  Follow-up for 33b0642e6ad33057a9f56763008e565d936d3948,https://github.com/systemd/systemd/commit/cffb53d742e29c5ea85ed6448989f89f74d0ef3e
systemd/systemd,https://github.com/systemd/systemd,9ad1d56,Daan De Meyer,2025-11-25T12:33:25Z,import: Make naming consistent  Always abbreviate import/pull/export structs with their first letter instead of only doing it in some places and using the wrong letter in other places.,https://github.com/systemd/systemd/commit/9ad1d56f82bd7c1ba2bef096c8a9a2a8ddfd7c41
systemd/systemd,https://github.com/systemd/systemd,2721720,Daan De Meyer,2025-11-25T12:03:18Z,core: Rename error sd_bus_error parameters to reterr_error,https://github.com/systemd/systemd/commit/27217200f6569f5ed7dae9c9e7d7251d41a26249
systemd/systemd,https://github.com/systemd/systemd,c421392,Daan De Meyer,2025-11-25T11:09:34Z,"fsprg: Drop const from gcry_mpi_t arguments  gcry_mpi_t is defined as ""typedef struct gcry_mpi *gcry_mpi_t;"". When const is applied to this type, it resolves to ""struct gcry_mpi *const"" instead of what we expect (""const struct gcry_mpi *"").  So we end up with a const pointer to a mutable object instead of a mutable pointer to a const object. Since the pointer passed to the function is copied regardless, making it const has zero benefit.  You'd think we could instead stop using gcry_mpi_t and replace it with ""const struct gcry_mpi *"", except that gcrypt leaked this mess into its api, so it expects const pointers to mutable objects as well, which means we can't take pointers to const objects as arguments, as we'd discard the qualifier when calling a gcrypt function.  To avoid confusion, let's drop the const qualifiers from the gcry_mpi_t arguments.",https://github.com/systemd/systemd/commit/c421392811b44410b915e7802581a7637557b0ab
systemd/systemd,https://github.com/systemd/systemd,9a6a8f3,Daan De Meyer,2025-11-21T10:14:32Z,tree-wide: Small fixes for various clang-tidy warnings,https://github.com/systemd/systemd/commit/9a6a8f35ebaada0e94c9e1cfb0b51a035b6ff244
systemd/systemd,https://github.com/systemd/systemd,38b59a8,Mike Yuan,2025-11-25T02:26:10Z,"libmount-util: build .c only if libmount feature is enabled  Follow-up for 7336f2c748fd37a60a3f5353ad198c1534d6cb5f  This alignes with some other optional modules in shraed/, and it allows dlopen_libmount() to be optimized out entirely. Let's avoid emitting pointless symbols.",https://github.com/systemd/systemd/commit/38b59a83d2caee6cede2d6946c4cc11ee54efea8
systemd/systemd,https://github.com/systemd/systemd,46b4b33,Mike Yuan,2025-11-25T02:19:37Z,"Revert ""pid1: pull in libmount unconditionally""  This reverts commit 6069de1ed34735482dc63ba7431f605b858ea719.",https://github.com/systemd/systemd/commit/46b4b33c256b918652d5e0b1b5ec376b598111f6
systemd/systemd,https://github.com/systemd/systemd,1bee93e,Mike Yuan,2025-11-25T01:34:08Z,"core/mount: comprehensively disable mount unit support if no libmount  Follow-up for b3243f4beead231e27a4f017f53288a303177cb2 and 5df44d0f6a1ba23b52b0c46a5e720f334f152ae5  Since we now consider this a supported senario, let's hook up libmount loading with the high-level unit_type_supported() machinery and gracefully skip the whole unit accordingly.",https://github.com/systemd/systemd/commit/1bee93e6e291b689c307ccf1496a44a73021fc84
systemd/systemd,https://github.com/systemd/systemd,b860edb,Luca Boccassi,2025-11-26T01:19:25Z,NEWS: update contributors list,https://github.com/systemd/systemd/commit/b860edb962f3848324a2225db9afd693898de573
systemd/systemd,https://github.com/systemd/systemd,9e929e4,Luca Boccassi,2025-11-26T01:18:22Z,Translations: update systemd-po  ninja -C build systemd-update-po,https://github.com/systemd/systemd/commit/9e929e4aa78a38f822be7aa3da9c11994ad94c07
systemd/systemd,https://github.com/systemd/systemd,ef1105f,Luca Boccassi,2025-11-26T01:17:18Z,Translations: update systemd-pot  ninja -C build systemd-pot,https://github.com/systemd/systemd/commit/ef1105f5d5c6f3c289e6df004be923b977a66430
systemd/systemd,https://github.com/systemd/systemd,2ded1c5,Luca Boccassi,2025-11-26T01:15:23Z,syscalls: add 'pragma export' to script that generates header  Otherwise it gets lost every time the header is regenerated  Follow-up for 3111327ca4a537454e40dae2a484c043bb89f7f7,https://github.com/systemd/systemd/commit/2ded1c5a6e55b792d990cfc945a49ba0b4687fc6
systemd/systemd,https://github.com/systemd/systemd,0a29708,Luca Boccassi,2025-11-26T01:13:40Z,Update hwdb  ninja -C build update-hwdb,https://github.com/systemd/systemd/commit/0a2970898ac086444aa80253e4b6907d169fc085
systemd/systemd,https://github.com/systemd/systemd,2ef2002,Mike Yuan,2025-11-25T17:42:11Z,"run: merge privileged_execution() into become_root()  This got split in 5cabeed80b30972babc7a082ca794c6b197e72ab to accommodate --empower, and later --empower received dedicated handling again (c36942916b7409109687d693c04b039def9c5b79). I think the new naming makes more sense - --empower is privileged after all, just with uid left unchanged. Hence merge privileged_execution back into it.",https://github.com/systemd/systemd/commit/2ef2002a966577b5b634130b052d076ebe5e0300
systemd/systemd,https://github.com/systemd/systemd,2207b7f,Mike Yuan,2025-11-25T17:52:05Z,"run0: swap the order of setting default wd and user  Follow-up for 4f6ef13f43aed654cbadb2785afee1ce567d710d  Special casing --area= rather than --empower makes the code self-explanatory, as --area= is about alternative home dir after all. On top of that this ensures when --area= and --empower are specified in combination we honor the home dir switch, too.",https://github.com/systemd/systemd/commit/2207b7f9a4360421485ecea5c527d4a914bb74b2
systemd/systemd,https://github.com/systemd/systemd,f76f91b,Mike Yuan,2025-11-25T02:52:57Z,dlfcn-util: fix potential dl handle leak  Follow-up for 2c7bdaf9f144ad339c72628579183fc849f2b794,https://github.com/systemd/systemd/commit/f76f91b7c99574b3e7120f0dd008b2ab703efc47
systemd/systemd,https://github.com/systemd/systemd,2ba910a,Daan De Meyer,2025-11-24T18:52:40Z,"run: Don't make executable absolute when --root-directory= is used  Also, unless --same-root-dir was specified, don't make the executable absolute if we're running in a chroot. Situations like this are still iffy, but we might as well handle them a little more gracefully.",https://github.com/systemd/systemd/commit/2ba910ab06e5970e9e2dc6d28a8d38a4adcd4a16
systemd/systemd,https://github.com/systemd/systemd,ade882f,Frantisek Sumsal,2025-11-25T17:40:10Z,sd-journal: fix a copy-paste error  Dereference the Directory pointer in the debug message instead of the (probably already freed) JournalFile one.,https://github.com/systemd/systemd/commit/ade882f16f67ffc7a9b73231e401e30bb61cbcfb
systemd/systemd,https://github.com/systemd/systemd,1d26bac,Zbigniew Jędrzejewski-Szmek,2025-11-25T23:32:54Z,tree-wide: Fix constness issues with newer glibc (#39896)  Latest glibc uses _Generic to have strstr() and other functions return const char* or char* based on whether the input is a const char* or a char*. This causes build failures as we previously always expected a char*.  Let's fix the compilation failures and add our own macros similar to glibc's to have string functions that return a mutable or const pointer depending on the input.,https://github.com/systemd/systemd/commit/1d26bac43f4c0db2e677ca2707e88d11e370f1bf
systemd/systemd,https://github.com/systemd/systemd,0bac1ed,Daan De Meyer,2025-11-25T15:46:04Z,tree-wide: Fix constness issues with newer glibc  Latest glibc uses _Generic to have strstr() and other functions return const char* or char* based on whether the input is a const char* or a char*. This causes build failures as we previously always expected a char*.  Let's fix the compilation failures and add our own macros similar to glibc's to have string functions that return a mutable or const pointer depending on the input.,https://github.com/systemd/systemd/commit/0bac1ed2422f15308414dd1e9d09812a966b0348
systemd/systemd,https://github.com/systemd/systemd,33b0642,Daan De Meyer,2025-11-21T08:25:18Z,tree-wide: sizeof() fixes  - TIME_T_MAX is always time_t so the check in time-util.c was redundant - quota-util.c was zero-ing a pointer - smbios11.c was calling sizeof(pointer),https://github.com/systemd/systemd/commit/33b0642e6ad33057a9f56763008e565d936d3948
systemd/systemd,https://github.com/systemd/systemd,c369429,Daan De Meyer,2025-11-24T18:48:49Z,"run0: Give --empower its own color, title and emoji  When in --empower mode, all created files will be owned by the current user, which could be problematic when creating files outside of the current user's home directory, as other processes running as the same user would be able to edit those files.  While this is a bit of an edge case since users already have to go through the effort of writing --empower to indicate they want a privileged session as the current user, it's not unphatomable to think they could start an empowered session which they later return to and continue using. Currently, it's not easy to differentiate a regular run0 session and an empowered session at a glance, so users might think they're using a regular run0 session when they're actually using an empowered session.  To address this problem, let's give empowered session their own identify, by making the background orange, using the pumpkin emoji as the shell prompt prefix and giving them an orange circle as the PTY title.",https://github.com/systemd/systemd/commit/c36942916b7409109687d693c04b039def9c5b79
systemd/systemd,https://github.com/systemd/systemd,2f62e4f,Daan De Meyer,2025-11-25T15:50:23Z,boot: Fix warning  memchr() is a macro on newer glibc so make sure to undefine it before redefining it.,https://github.com/systemd/systemd/commit/2f62e4f5d8c727afee3f28d59571b50cb94b06ea
systemd/systemd,https://github.com/systemd/systemd,784f5a5,Yu Watanabe,2025-11-25T13:16:16Z,openssl-util: indentation fix  Follow-up for 1144f07dc69cc04138d90000b1782c4a2b27cd94.,https://github.com/systemd/systemd/commit/784f5a52f80e81db46dbe00697d8dc7ef9e0d4b8
systemd/systemd,https://github.com/systemd/systemd,1defd69,Yu Watanabe,2025-11-25T06:22:58Z,TEST-02-UNITTESTS: drop outdated comment  Follow-up for 741d59b326ea25053097fcbf004864ea6b3c6299.,https://github.com/systemd/systemd/commit/1defd69d69118b21658dd0062c3cbd0d56de0cef
systemd/systemd,https://github.com/systemd/systemd,f01daa3,Yu Watanabe,2025-11-25T13:51:25Z,docs/MOUNT_REQUIREMENTS: fix typo  Follow-ups for 3e94ae6f1e2bac0c6be2817ab419123ea37d8e4a.,https://github.com/systemd/systemd/commit/f01daa30f155859e83013f4c840d64ddcf735b39
systemd/systemd,https://github.com/systemd/systemd,05afbcc,Yu Watanabe,2025-11-25T13:49:44Z,process-util: fix typo  Follow-up for a08f2ea02dc4fcbd7f2f73a5a24e0af32b34fe55.,https://github.com/systemd/systemd/commit/05afbcc3774e4fd5022acfc91f513de96a95ca32
systemd/systemd,https://github.com/systemd/systemd,d867010,Daan De Meyer,2025-11-25T12:50:45Z,"mkosi: Add hyperscale profile (#39329)  In the CentOS Hyperscale SIG, we maintain a backport of systemd with its own rpm spec forked from rawhide.  Let's make it easy to build upstream rpms using the Hyperscale spec by adding a mkosi hyperscale profile.",https://github.com/systemd/systemd/commit/d867010caa98609a278068bb4b564014be48695a
systemd/systemd,https://github.com/systemd/systemd,32b10d0,Daan De Meyer,2025-11-25T09:41:24Z,TEST-88-UPGRADE: Stop resolved hook socket before downgrading  Otherwise it'll remain active and cause networkd to get started again during the downgrade.,https://github.com/systemd/systemd/commit/32b10d0d28d159eecb7f072d1fb455f2de2ade09
systemd/systemd,https://github.com/systemd/systemd,7fd5f7a,Zbigniew Jędrzejewski-Szmek,2025-11-25T10:43:26Z,Adjust code to query terminal size and other attributes (#39832),https://github.com/systemd/systemd/commit/7fd5f7aade6f37df6b5dc5332d349fa5b0b69094
systemd/systemd,https://github.com/systemd/systemd,91af194,Daan De Meyer,2025-11-19T15:43:54Z,"mkosi: Add fixed qemu ppa for Noble temporarily  Until https://bugs.launchpad.net/ubuntu/+source/qemu/+bug/2127974 is fixed and rolled out, let's use enr0n's ppa with the fixed qemu to make CI pass.",https://github.com/systemd/systemd/commit/91af1940018dabd94a23932983f6180db9cae674
systemd/systemd,https://github.com/systemd/systemd,c41c4b2,Daan De Meyer,2025-09-01T15:31:29Z,"mkosi: Add hyperscale profile  In the CentOS Hyperscale SIG, we maintain a backport of systemd with its own rpm spec forked from rawhide.  Let's make it easy to build upstream rpms using the Hyperscale spec by adding a mkosi hyperscale profile.",https://github.com/systemd/systemd/commit/c41c4b2bf367b743d6de03f295dd5377765a342f
systemd/systemd,https://github.com/systemd/systemd,fb514c2,Daan De Meyer,2025-09-01T15:29:54Z,"mkosi: Rework how the pkgenv environment variables are set  Instead of including distribution specific files in the subimages, let's have one common mkosi.pkgenv/ directory that handles all the matching which is then included in the subimages.  This gives us more control on exactly how we do the matching.",https://github.com/systemd/systemd/commit/fb514c2f8f195c869b2f0e9ea5ae4ecdd639ebbd
systemd/systemd,https://github.com/systemd/systemd,2fe49e8,Daan De Meyer,2025-10-15T19:40:11Z,"mkosi: update mkosi commit reference to 10544812b35a668d4aac9834c78ee8166e99bc78  * 10544812b3 Don't fix up vmlinuz locations if not required * 9baf551923 Reduce amount of packages in default image * 9e1a2f18b8 Add support for assert sections * c7c6e2c0b1 ubuntu: Switch to devel as the default release * 0822deb69c Improve logging when we can not extract kernel version from filename * 1fd7ef3db7 Do not build default initrd if Initrds= is specified * 611c8b46c8 Don't unconditionally sync when PackageCacheDirectory=/var * ab37f24d38 README: add link to OBS docs for mkosi builds * 02bf256ebb completion: add reuse ignore comments * 10ccb0b04f Make sure not all subimages depend on default-initrd subimage * 442e1ce0f1 mkosi-tools: systemd-boot-tools is now available for all arches * 307fc1dba3 action: make it work when used as a submodule * c37a55f91b config: serialize dataclass instances in our JSONEncoder * f26cb34155 log: set terminal window title in complete_step while mkosi runs * 280c78e681 Make sure inherited settings are applied for the default initrd * ae4f2fd718 Fix typo * 5644f3e83e build(deps): bump github/codeql-action from 3.29.7 to 3.30.5 * 7d7b26b8c9 build(deps): bump actions/checkout from 4.2.2 to 5.0.0 * e805253447 postmarketos: implement is_kernel_package * dd51d2e019 postmarketos: provide missing i386-vars.fd * e23e6de66b Do not relabel files when building extension image * ab05ead5eb Bump various systemd version checks to 258 * 382cc8b450 preset: drop systemd-networkd-wait-online.service * 477b6b2ed5 mkosi-initrd: install systemd-container in network profile * 1d167c0b53 mkosi-initrd: add 89-ethernet.network for network profile * b1e81dec3a mkosi-initrd: Install libseccomp explicitly * 3c431a141c opensuse: repository non-oss-debug is invalid * 62ab363149 ci: add an s390x build job for additional coverage * 62765f2d07 mailmap: deduplicate Daan * 47f963f40b Revert ""ci: Disable PPC jobs temporarily"" * 6a48f83dda dnf: Always specify --best again * 3702368616 sandbox: Make all relative paths absolute during argparsing * a587af0bf7 dnf: Fix /var package cache directory check in package_subdirs() * 56cdbc25b5 Always use repository metadata from /var package cache directory * 669d4418a3 Add note on Encrypt=yes to Passphrase= docs * caa129edae Drop BuildSourcesEphemeral=yes from default image config * 7edca63478 Add devicetree-auto support for UKI * 6cb1649074 Don't add ncdu for ppc64-le on Fedora * e019d2d2a6 ci: Disable PPC jobs temporarily",https://github.com/systemd/systemd/commit/2fe49e8a4c07b1a8d2652f4f1e70505f63653151
systemd/systemd,https://github.com/systemd/systemd,2797111,Yu Watanabe,2025-11-23T02:51:01Z,"factory: do not install nsswitch.conf when nss is disabled  When systemd is built with musl, nss modules are not supported, hence the file is not necessary. Let's not install the file.",https://github.com/systemd/systemd/commit/27971114d5ba8168dbb96011a1840416ba69282a
systemd/systemd,https://github.com/systemd/systemd,e698ee5,Zbigniew Jędrzejewski-Szmek,2025-11-20T15:37:30Z,"basic/terminal-util: ignore failures in cleanup  Some of the functions were ignoring failure in cleanup, others weren't. If we got a reply, it's better to use it, so ignore failures in cleanup everywhere.",https://github.com/systemd/systemd/commit/e698ee5705758cb0fd8ad0186db47541c6c4ea5a
systemd/systemd,https://github.com/systemd/systemd,46f6742,Zbigniew Jędrzejewski-Szmek,2025-11-20T13:33:26Z,"basic/terminal-util: operate on one fd in get_default_background_color()  This moves the open call earlier, so that we do any state-changing operations if we actually managed to open the nonblocking fd. The code is easier to follow this way and might be more robust.  Suprisingly, this fixes https://github.com/systemd/systemd/issues/39055: it seems that run0 chowns /dev/stdin (in my case /dev/pts/0) to root:root, and the second run0 can read and write stdin/stdout throught the already-open fds, but fd_reopen fails.  Fixes https://github.com/systemd/systemd/issues/39055.",https://github.com/systemd/systemd/commit/46f6742911ba70ad19cc94da241dc4ff7b1c7489
systemd/systemd,https://github.com/systemd/systemd,863b852,Jelle van der Waa,2025-11-15T16:59:09Z,"coccinelle: error out when spatch is not installed  Otherwise parallel keeps spitting out ""command not found"".",https://github.com/systemd/systemd/commit/863b852c8002b03bd5ca8aa44c8a5cf09c71f157
systemd/systemd,https://github.com/systemd/systemd,c12966c,Jelle van der Waa,2025-11-22T13:45:04Z,treewide: prefer using SD_JSON_BUILD_PAIR_* over SD_JSON_BUILD_PAIR()  Include a coccinelle script that patches this automatically.,https://github.com/systemd/systemd/commit/c12966c14f564ccf51a47af47faea9d6cd897cc3
systemd/systemd,https://github.com/systemd/systemd,21ebaaf,Jelle van der Waa,2025-11-22T13:44:35Z,"shared: prefer using SD_JSON_BUILD_PAIR_* over SD_JSON_BUILD_PAIR()  No functional change, just refactoring.",https://github.com/systemd/systemd/commit/21ebaaf6279a33e3ccb86e0a947840c7839ef042
systemd/systemd,https://github.com/systemd/systemd,1861504,Jelle van der Waa,2025-11-22T13:44:15Z,"home: prefer using SD_JSON_BUILD_PAIR_* over SD_JSON_BUILD_PAIR()  No functional change, just refactoring.",https://github.com/systemd/systemd/commit/18615041a5e38bcedd7ae213a19adf69d95321d0
systemd/systemd,https://github.com/systemd/systemd,a8a8498,Jelle van der Waa,2025-11-22T13:43:31Z,"cryptenroll: prefer using SD_JSON_BUILD_PAIR_* over SD_JSON_BUILD_PAIR()  No functional change, just refactoring.",https://github.com/systemd/systemd/commit/a8a8498ef16b0147c3f6c91c0db9e727aed8b388
systemd/systemd,https://github.com/systemd/systemd,a751da2,Jelle van der Waa,2025-11-22T13:43:03Z,"core: prefer using SD_JSON_BUILD_PAIR_* over SD_JSON_BUILD_PAIR()  No functional change, just refactoring.",https://github.com/systemd/systemd/commit/a751da2cb66e047be0a9cc3b20ca44238665073e
systemd/systemd,https://github.com/systemd/systemd,3a5d9ee,Lennart Poettering,2025-11-18T21:32:41Z,"discover-image: use _SD_PATH_INVALID where appropriate  The enum definition only exists for cases like this, use it, instead of its literal value.  This doesn't effectively change anything, but cleans up the code a bit.",https://github.com/systemd/systemd/commit/3a5d9ee980afdd1fad4e8c6b789a6270fce713fc
systemd/systemd,https://github.com/systemd/systemd,b26e620,Lennart Poettering,2025-11-19T16:26:15Z,dissect-image: make verity params for mountfsd_mount_image() optional,https://github.com/systemd/systemd/commit/b26e6207cba6dbf78f0bc62603adf32fbcfae87d
systemd/systemd,https://github.com/systemd/systemd,e45f2ae,Chris Down,2025-11-24T17:13:43Z,"Revert ""nspawn: Fix broken host links for container journals"" (#39879)  Reverts systemd/systemd#39727",https://github.com/systemd/systemd/commit/e45f2aede94ce9eb166f042bd76b9816b5d212c5
systemd/systemd,https://github.com/systemd/systemd,8c22cb2,Daan De Meyer,2025-11-24T16:19:26Z,core: Make libmount optional (#39878),https://github.com/systemd/systemd/commit/8c22cb264d6c29b974132c7e8366eb533ec378f0
systemd/systemd,https://github.com/systemd/systemd,7599d26,Antonio Alvarez Feijoo,2025-11-24T12:11:01Z,run: fix two minor memory leaks  ``` ==19541== 8 bytes in 1 blocks are still reachable in loss record 1 of 3 ==19541==    at 0x4841744: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so) ==19541==    by 0x50125C9: strdup (strdup.c:42) ==19541==    by 0x4C55925: getusername_malloc (user-util.c:154) ==19541==    by 0x1121D6: parse_argv_sudo_mode (run.c:1098) ==19541==    by 0x123B13: run (run.c:3032) ==19541==    by 0x124198: main (run.c:3100) ==19541== ==19541== 11 bytes in 1 blocks are still reachable in loss record 2 of 3 ==19541==    at 0x4841744: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so) ==19541==    by 0x50125C9: strdup (strdup.c:42) ==19541==    by 0x112A9C: parse_argv_sudo_mode (run.c:1182) ==19541==    by 0x123B13: run (run.c:3032) ==19541==    by 0x124198: main (run.c:3100) ```,https://github.com/systemd/systemd/commit/7599d26436a24784016586b618ca50ea0ca3660e
systemd/systemd,https://github.com/systemd/systemd,77a1e2d,Lennart Poettering,2025-11-24T15:34:00Z,"Revert ""nspawn: Fix broken host links for container journals""",https://github.com/systemd/systemd/commit/77a1e2dec6941c461bcbad675d089292adb4246e
systemd/systemd,https://github.com/systemd/systemd,5df44d0,Daan De Meyer,2025-11-24T14:33:26Z,"core: Make libmount optional  Instead of skipping libcore entirely when libmount is not available, let's only compile out the pieces that need libmount. This makes the meson logic much less complex and allows systemd-analyze to be built when libmount is not available.",https://github.com/systemd/systemd/commit/5df44d0f6a1ba23b52b0c46a5e720f334f152ae5
systemd/systemd,https://github.com/systemd/systemd,9c2cd09,Daan De Meyer,2025-11-24T15:08:57Z,test: Skip protect_kernel_logs test if libmount is missing  libmount is required for setup_namespace() so skip the test if it is not available.,https://github.com/systemd/systemd/commit/9c2cd0942032bc06fb70714f7c1faf1cd67e8ebc
systemd/systemd,https://github.com/systemd/systemd,39c343d,Lennart Poettering,2025-11-24T14:30:23Z,nspawn: fix CI,https://github.com/systemd/systemd/commit/39c343daa657f7b0c91622123c04fea97d3bfd7f
systemd/systemd,https://github.com/systemd/systemd,da22ccf,Yu Watanabe,2025-11-24T01:30:07Z,"openssl-util: introduce openssl_extract_public_key() helper function  This splits out common logic in keyutil and systemd-measure.  Note, previously d2i_PUBKEY_fp() was used, but now it is replaced with d2i_PUBKEY(), as musl seems to not support reading from memstream.",https://github.com/systemd/systemd/commit/da22ccf48ff3884f68b57cca13b483679ea233e5
systemd/systemd,https://github.com/systemd/systemd,4f6ef13,Daan De Meyer,2025-11-24T11:36:42Z,"run0: Stay in cwd if --empower is specified without a user  If we run ""run0 --empower"", the expectation is to stay in the current working directory, not switch to ~.",https://github.com/systemd/systemd/commit/4f6ef13f43aed654cbadb2785afee1ce567d710d
systemd/systemd,https://github.com/systemd/systemd,c746488,Lennart Poettering,2025-11-24T13:14:16Z,block dlopen() once we transition into some foreign namespace (#39824)  Let's make sure we never accidentally end up loading code from a foreign namespace.,https://github.com/systemd/systemd/commit/c746488537142e5e061a01dec486592583552a8b
systemd/systemd,https://github.com/systemd/systemd,d60206c,Daan De Meyer,2025-11-24T13:05:29Z,"meson: Still build libshared even if libmount is disabled (#39871)  Currently, if the libmount feature is disabled, we don't build libshared and as a result skip building every other executable as well. Among other things, this makes our nodeps CI builds kind of pointless since hardly any code will be compiled.  Let's improve on the situation by making libmount properly optional in libshared. Then, we only skip building the executables that actually need libmount.",https://github.com/systemd/systemd/commit/d60206c49a85e214bd8cb96eb432de3f5eeb6c87
systemd/systemd,https://github.com/systemd/systemd,0cc96fc,Yu Watanabe,2025-11-22T00:46:58Z,test: use log_tests_skipped_errno() at one more place  Follow-up for 12d2abe0827ad62652d0cb1791c89f3d2adbb280.,https://github.com/systemd/systemd/commit/0cc96fc213eca929fadd193b05ddde5b1f4f0628
systemd/systemd,https://github.com/systemd/systemd,7336f2c,Daan De Meyer,2025-11-24T09:57:58Z,"meson: Still build libshared even if libmount is disabled  Currently, if the libmount feature is disabled, we don't build libshared and as a result skip building every other executable as well. Among other things, this makes our nodeps CI builds kind of pointless since hardly any code will be compiled.  Let's improve on the situation by making libmount properly optional in libshared. Then, we only skip building the executables that actually need libmount.",https://github.com/systemd/systemd/commit/7336f2c748fd37a60a3f5353ad198c1534d6cb5f
systemd/systemd,https://github.com/systemd/systemd,e910f9b,Daan De Meyer,2025-11-24T10:53:12Z,test-reread-partition-table: Don't keep open fds around  Avoids EBUSY from BLKRRPART when built without libblkid support.,https://github.com/systemd/systemd/commit/e910f9bc63356ccaca6d87bd62fd79d36b1cccd4
systemd/systemd,https://github.com/systemd/systemd,dee7dfe,Daan De Meyer,2025-11-24T11:51:14Z,test-reread-partition-table: Only check for CAP_SYS_ADMIN  We might have CAP_SYS_ADMIN even without being root.,https://github.com/systemd/systemd/commit/dee7dfea1db4291f2418a73487a90e7513c3cb8a
systemd/systemd,https://github.com/systemd/systemd,43687c2,Daan De Meyer,2025-11-24T12:07:39Z,"tests: Assume we're running in a chroot if check fails  running_in_chroot() will fail when a test is executed as a non-root user without CAP_DAC_READ_SEARCH as it won't be able to access /proc/1/root.  Let's make things more robust by skipping tests if we can't detect if we're in a chroot or not, since if we can't even detect if we're in a chroot or not, chances are we're missing the required privileges to execute the test anyway.",https://github.com/systemd/systemd/commit/43687c22ab5a07906482271cf47c581087924638
systemd/systemd,https://github.com/systemd/systemd,f866ff3,Yu Watanabe,2025-11-24T03:59:22Z,"tree-wide: replace tab with space, adjust missing or duplicated space",https://github.com/systemd/systemd/commit/f866ff3df81902cd2c59b34c8e8d3e2d6d1b5d7d
systemd/systemd,https://github.com/systemd/systemd,332bce5,Yu Watanabe,2025-11-22T01:19:47Z,oomd: move check if processes can be killed into oomd_cgroup_kill()  This also adds a debuuging log if the check failed. Addresses https://github.com/systemd/systemd/pull/39773#discussion_r2549439336.  Follow-up for 38e9d40c8097363b1e8fa025ef06865dadb0a3ac.,https://github.com/systemd/systemd/commit/332bce5bd7a9294c3b414b6da72b09986af69d6b
systemd/systemd,https://github.com/systemd/systemd,5da6a8e,Luca Boccassi,2025-11-24T11:15:09Z,"man,doc: add uapi spec numbers to all links to uapi specs (#39867)",https://github.com/systemd/systemd/commit/5da6a8ee6e3ae9a88ae86a98b9eeff02a41f3fe1
systemd/systemd,https://github.com/systemd/systemd,ed3fcaa,Lennart Poettering,2025-11-20T13:43:41Z,"crash-handler: also disable dlopen(), just in case",https://github.com/systemd/systemd/commit/ed3fcaae11da24270b7b4a7c73be288ec86e4e0a
systemd/systemd,https://github.com/systemd/systemd,a08f2ea,Lennart Poettering,2025-11-20T13:43:22Z,process-util: also disable dlopen() in safe_fork(),https://github.com/systemd/systemd/commit/a08f2ea02dc4fcbd7f2f73a5a24e0af32b34fe55
systemd/systemd,https://github.com/systemd/systemd,9252e26,Lennart Poettering,2025-11-24T08:41:36Z,core: load libcryptsetup before forking off child that might need it,https://github.com/systemd/systemd/commit/9252e26f4cbf92428cab595045716fee783f375e
systemd/systemd,https://github.com/systemd/systemd,c64a486,Lennart Poettering,2025-11-21T16:09:54Z,sysext: load libraries before forking off worker child,https://github.com/systemd/systemd/commit/c64a48605803319510154ae06dbe5a94c5cfe64a
systemd/systemd,https://github.com/systemd/systemd,09596e7,Lennart Poettering,2025-11-21T16:09:21Z,repart: load libraries before forking off child,https://github.com/systemd/systemd/commit/09596e7d1a540a78e984c196d776102914b4239f
systemd/systemd,https://github.com/systemd/systemd,52594c3,Lennart Poettering,2025-11-21T07:53:44Z,udev: load a bunch of libs before we fork off worker processes,https://github.com/systemd/systemd/commit/52594c31848048575e95ae0af3f97d18397c70f8
systemd/systemd,https://github.com/systemd/systemd,5b2f528,Lennart Poettering,2025-11-21T07:53:28Z,dissect-image: load library before we fork off metadata extractor child process,https://github.com/systemd/systemd/commit/5b2f52814b1d106ce1061cd742529860bd37f8ad
systemd/systemd,https://github.com/systemd/systemd,e683dce,Lennart Poettering,2025-11-21T07:53:14Z,portabled: load a bunch of libs before we fork off a dissector child processes,https://github.com/systemd/systemd/commit/e683dce1f1747de2fd48bfd67849cbb70a13c47c
systemd/systemd,https://github.com/systemd/systemd,6069de1,Lennart Poettering,2025-11-24T08:55:46Z,pid1: pull in libmount unconditionally,https://github.com/systemd/systemd/commit/6069de1ed34735482dc63ba7431f605b858ea719
systemd/systemd,https://github.com/systemd/systemd,efaf5a7,Lennart Poettering,2025-11-24T08:55:03Z,execute: load a bunch of libs before we disable dlopen(),https://github.com/systemd/systemd/commit/efaf5a763d6a06645dba8e88ebc15e887d59cbef
systemd/systemd,https://github.com/systemd/systemd,800d11c,Lennart Poettering,2025-11-19T16:23:58Z,nspawn: load three libraries we'll need later before we fork() a child,https://github.com/systemd/systemd/commit/800d11c36cd97da2122eae5369939818d50f491d
systemd/systemd,https://github.com/systemd/systemd,2c7bdaf,Lennart Poettering,2025-11-19T16:13:50Z,"dlfcn-util: let's make our dlopen() code fail if we enter a container namespace  Now that we dlopen() so many deps, it might happen by accident that we end up dlopen()ening stuff when we entered a container, which we should really avoid, to not mix host and container libraries.  Let's add a global variable we can set when we want to block dlopen() to ever succeed. This is then checked primarily in dlopen_many_sym_or_warn(), where we'll generate EPERM plus a log message.  There are a couple of other places we invoke dlopen(), without going through dlopen_many_sym_or_warn(). This adds the same check there.",https://github.com/systemd/systemd/commit/2c7bdaf9f144ad339c72628579183fc849f2b794
systemd/systemd,https://github.com/systemd/systemd,ab5a79f,Craig McLure,2025-11-24T06:02:10Z,"hwdb: Add alternative mode for Beacn Mic (#39868)  The Beacn Mic's alt-mode behaves identically to it's primary mode from a communication perspective, it just presents a different channel configuration to ALSA.",https://github.com/systemd/systemd/commit/ab5a79ff5d9bae48d544585c84768234e60644bd
systemd/systemd,https://github.com/systemd/systemd,fc3adbb,Lennart Poettering,2025-11-23T17:07:13Z,"man: always prefix links to uapi specs with their UAPI.XY spec number  Let's try to establish the spec numbers, by mentioning them in most doc links.  Follow-up for: https://github.com/uapi-group/specifications/pull/187",https://github.com/systemd/systemd/commit/fc3adbbbcb4d4a03bd25f4b4f8e764f565b7b07f
systemd/systemd,https://github.com/systemd/systemd,81b52a0,Lennart Poettering,2025-11-23T16:16:09Z,docs: reference UAPI specs by their number when linked,https://github.com/systemd/systemd/commit/81b52a013cf7d69e3742696c2afa53dd038f3579
systemd/systemd,https://github.com/systemd/systemd,19deb47,Yu Watanabe,2025-11-23T06:04:26Z,firstboot: drop redundant and spurious errno check  Follow-up for 2319154a6bec7b8c42e901dfacaefe95bf4e3750.,https://github.com/systemd/systemd/commit/19deb47ade9d54160e7ba5f8f2a995e3f22df678
systemd/systemd,https://github.com/systemd/systemd,941b916,Luca Boccassi,2025-11-22T00:25:21Z,"boot: ensure profile IDs do not get leaked and overwritten when there are tries suffixes  boot_entry_parse_tries() replaces the id, which means the id with the profile appended is lost (leaked) and replaced by a plain filename in case there are tries suffixes. This means the wrong order is used in displaying the entries in the menu, as the main profile is always last given id_without_profile has the tries suffixes and sorts higher, while the main profile has no id_without_profile and the id sorts lower since it does not have the tries suffix.  Follow-up for 4301ad00ef715885be5c3bdf84c152030b7d36ff",https://github.com/systemd/systemd/commit/941b91600cd57b19f4c6c8624459aec5a3e22014
systemd/systemd,https://github.com/systemd/systemd,2d82ebf,Yu Watanabe,2025-11-23T00:11:32Z,core/selinux-setup: actually skip setup gracefully when libselinux is not available (#39859),https://github.com/systemd/systemd/commit/2d82ebf600916ff54e7c4397207bd430258cfd53
systemd/systemd,https://github.com/systemd/systemd,dd281e1,Daan De Meyer,2025-11-22T21:50:39Z,docs: Document cast formatting rules,https://github.com/systemd/systemd/commit/dd281e19a7c9b5c25618f98f95b6d767e4e436c5
systemd/systemd,https://github.com/systemd/systemd,375a4bd,Mike Yuan,2025-11-20T19:07:32Z,core/selinux-setup: actually skip setup gracefully when libselinux is not available  Follow-up for 83b6ef9b62765b11bc602eae906ff13a5464a638,https://github.com/systemd/systemd/commit/375a4bd878e472ed9f14627c29bc0b484bf37be7
systemd/systemd,https://github.com/systemd/systemd,32b7a07,Mike Yuan,2025-11-20T12:52:51Z,core/exec-invoke: deduplicate needs_setuid with needs_sandboxing,https://github.com/systemd/systemd/commit/32b7a07b8c6cfd4804e381934e3c62234ec12dd5
systemd/systemd,https://github.com/systemd/systemd,f53ac77,Yu Watanabe,2025-11-22T11:54:28Z,clang-tidy: Enable misc-include-cleaner check (#39835)  The previous commit fixes all remaining violations of the check for a very specific setup (Fedora Rawhide with as many dependencies as possible installed). The linter job in CI runs that specific setup so we enable the check in the clang-tidy config but do not yet enable the clang-tidy test suite in meson by default as it will very likely still fail in different setups than the one in CI.,https://github.com/systemd/systemd/commit/f53ac7742f0806f9320ab17950fc268bc2951593
systemd/systemd,https://github.com/systemd/systemd,6d57f58,Daan De Meyer,2025-05-20T10:28:15Z,clang-tidy: Enable misc-include-cleaner check  The previous commit fixes all remaining violations of the check for a very specific setup (Fedora Rawhide with as many dependencies as possible installed). The linter job in CI runs that specific setup so we enable the check in the clang-tidy config but do not yet enable the clang-tidy test suite in meson by default as it will very likely still fail in different setups than the one in CI.,https://github.com/systemd/systemd/commit/6d57f584de9ef0efd755db533bf766a09816a9c8
systemd/systemd,https://github.com/systemd/systemd,87fbd33,Daan De Meyer,2025-05-23T11:38:45Z,clang-tidy: Fix all remaining misc-include-cleaner violations  - Remove unused includes - Add common false positive headers to misc-include-cleaner.IgnoreHeaders - Add IWYU pragma keep for uncommon false positive headers,https://github.com/systemd/systemd/commit/87fbd33372c00a91a5a9b3af41ed81006dd0799f
systemd/systemd,https://github.com/systemd/systemd,d11ce97,Daan De Meyer,2025-11-20T18:15:14Z,test-journald-config: Modernize test,https://github.com/systemd/systemd/commit/d11ce973863b1c907e60cd3de39cbcc7e24b8b32
systemd/systemd,https://github.com/systemd/systemd,add1828,Zbigniew Jędrzejewski-Szmek,2025-11-22T09:14:10Z,Various logging fixlets (#39837),https://github.com/systemd/systemd/commit/add182886197f5cfa7e81a0557ebdcdf2a4429cd
systemd/systemd,https://github.com/systemd/systemd,229e106,Yu Watanabe,2025-11-22T01:43:14Z,NEWS: drop one sentence  We have agreed the bump.,https://github.com/systemd/systemd/commit/229e106a6edc28809ee64927a5221e78fac032db
systemd/systemd,https://github.com/systemd/systemd,e6baa5b,Yu Watanabe,2025-11-22T01:04:02Z,Use SD_JSON_BUILD_PAIR_* macros if possible in shared/core/home (#39845),https://github.com/systemd/systemd/commit/e6baa5ba0b1c8e092b7b37004114eea3675581af
systemd/systemd,https://github.com/systemd/systemd,924081f,Yu Watanabe,2025-11-21T00:51:29Z,pam-systemd-home: various logging cleanups,https://github.com/systemd/systemd/commit/924081f7933f86e8b5be02bec3e5a4ec5774d831
systemd/systemd,https://github.com/systemd/systemd,447eb0a,Yu Watanabe,2025-11-21T00:31:36Z,pam-systemd-loadkey: append full stop,https://github.com/systemd/systemd/commit/447eb0a00ccdeb448ccd98f35239aae1e0a2dc48
systemd/systemd,https://github.com/systemd/systemd,37d8d66,Yu Watanabe,2025-11-21T00:23:11Z,"pam-systemd: various fixlets for logging  - Do not use '%m' when errno is not set. - Do not use pam_syslog_errno() when errno is not set. - Use pam_debug_syslog_errno() rather than log_debug_errno(). - Use 0 rather than PAM_SUCCESS in the function that returns negative   errno, though PAM_SUCCESS == 0, hence that does not change any   behavior. - Append missing full stop in the log message.",https://github.com/systemd/systemd/commit/37d8d6623f3275e5b10bde640c3d9c3f7092f788
systemd/systemd,https://github.com/systemd/systemd,7214aa9,Yu Watanabe,2025-11-21T00:21:25Z,"pam-util: make pam_debug_syslog_errno() returns pam error  Currently, the result of pam_debug_syslog_errno() is unused, hence this does not change anything and may be slightly redundant. But let's follow our usual coding style.",https://github.com/systemd/systemd/commit/7214aa9a2cbe52a0039bf744bfadaeda239f442d
systemd/systemd,https://github.com/systemd/systemd,82f2eb7,Yu Watanabe,2025-11-21T00:11:34Z,"pam-util: use correct errno  - pam_log_oom() passes ENOMEM rather than -ENOMEM, hence previously   pam_log_oom() did not return PAM_BUF_ERR. - We may (mistakenly) pass SYNTHETIC_ERRNO(). Let's gracefully handle that. - Introduce errno_to_pam_error() helper function.",https://github.com/systemd/systemd/commit/82f2eb73b19ca239e3f93d90f546660d4532201a
systemd/systemd,https://github.com/systemd/systemd,7582679,Yu Watanabe,2025-11-20T23:40:17Z,apparmor: update log message  Follow-up for c3b3eea2e56d7904ace7dd72c8520933ebef843e. Addresses https://github.com/systemd/systemd/pull/39826#discussion_r2547327325.,https://github.com/systemd/systemd/commit/7582679d0ed40b478cb5869d8a4173e9a8135fd3
systemd/systemd,https://github.com/systemd/systemd,7d23e27,Nick Rosbrook,2025-11-21T17:49:37Z,"test: skip test-reread-partition-table if missing privileges  Right now, this test runs inside unprivileged chroots, despite the running_in_chroot() check. This is because running_in_chroot() fails with -EACCES, which is ignored.  Hence, check for privileges before calling running_in_chroot(), otherwise call is inconclusive. Note, the test will fail later on if running without privileges anyways.",https://github.com/systemd/systemd/commit/7d23e27e4c96d47187986a6b21cb2710485b71db
systemd/systemd,https://github.com/systemd/systemd,12d2abe,Luca Boccassi,2025-11-21T17:53:46Z,"test: check for all errors in test-reread-partition-table  Otherwise if opening the loop dev fails, the test segfaults dereferencing a NULL variable later  Follow-up for 757887d01dd96125be1774f4b23b12f2fbda9a8b",https://github.com/systemd/systemd/commit/12d2abe0827ad62652d0cb1791c89f3d2adbb280
systemd/systemd,https://github.com/systemd/systemd,2a3f054,Jelle van der Waa,2025-11-21T16:07:45Z,"resolve: prefer using SD_JSON_BUILD_PAIR_* over SD_JSON_BUILD_PAIR()  No functional change, just refactoring.",https://github.com/systemd/systemd/commit/2a3f05400a020142b8026f3d36ed19949f5463db
systemd/systemd,https://github.com/systemd/systemd,2ba6cdc,Jelle van der Waa,2025-11-21T16:01:54Z,"home: prefer using SD_JSON_BUILD_PAIR_* over SD_JSON_BUILD_PAIR()  No functional change, just refactoring.",https://github.com/systemd/systemd/commit/2ba6cdc1b9bcef1705d085ae76e71c534e786b4f
systemd/systemd,https://github.com/systemd/systemd,7dda32a,Jelle van der Waa,2025-11-21T15:59:30Z,"shared: prefer using SD_JSON_BUILD_PAIR_* over SD_JSON_BUILD_PAIR()  No functional change, just refactoring.",https://github.com/systemd/systemd/commit/7dda32a5440ce176aea5b6753a51253254c43dab
systemd/systemd,https://github.com/systemd/systemd,d1ae5e2,Chris Down,2025-11-21T15:42:23Z,"nspawn: Fix broken host links for container journals (#39727)  Commit 88252ca changed nspawn to always run from a temporary mount directory (e.g., /tmp/nspawn-root-XXXXXX). This was a good simplification for mount logic, but it unintentionally broke the --link-journal feature.  The setup_journal() helper was subsequently passed this ephemeral path instead of the persistent machine path (from --directory= or --image=). This caused the host to create broken symlinks pointing to a temporary directory that would soon be gone.  Fix this by storing the original path and plumbing it through to setup_journal().  All other mount-related logic in outer_child() continues to use the temporary `directory` variable.  Fixes: #39472",https://github.com/systemd/systemd/commit/d1ae5e26c4d208f5fe2a090b3ab43a9a38d354c8
systemd/systemd,https://github.com/systemd/systemd,887f54a,Chris Down,2025-11-14T08:46:08Z,nspawn: Add integration test for --link-journal,https://github.com/systemd/systemd/commit/887f54adceeef49562bc3710530ffaa04606d0d8
systemd/systemd,https://github.com/systemd/systemd,11eebc2,Chris Down,2025-11-14T08:44:49Z,"nspawn: Fix broken host links for container journals  Commit 88252ca changed nspawn to always run from a temporary mount directory (e.g., /tmp/nspawn-root-XXXXXX). This was a good simplification for mount logic, but it unintentionally broke the --link-journal feature.  The setup_journal() helper was subsequently passed this ephemeral path instead of the persistent machine path (from --directory= or --image=). This caused the host to create broken symlinks pointing to a temporary directory that would soon be gone.  Fix this by storing the original path and plumbing it through to setup_journal().  All other mount-related logic in outer_child() continues to use the temporary `directory` variable.  Fixes: #39472",https://github.com/systemd/systemd/commit/11eebc2357d09786709247937c4b5ed5534ce7f1
systemd/systemd,https://github.com/systemd/systemd,2691e75,Daan De Meyer,2025-11-21T10:44:30Z,run0: Add note about processes having privileges over --empower sessions,https://github.com/systemd/systemd/commit/2691e7558bd1b605f6a837895b2a3a5f0c970242
systemd/systemd,https://github.com/systemd/systemd,cf063b8,Daan De Meyer,2025-11-13T20:59:18Z,"sd-bus: Exit event loop with error code instead of EXIT_FAILURE  Instead of failing the event loop with a generic EXIT_FAILURE error code when exit-on-disconnect is used, let's propagate the error code instead of swallowing it.  Whereas previously sd_event_loop() would always fail with exit code '1' when exit-on-disconnect is used with an sd-bus instance registered with the event loop that encounters a failure, now we'll correctly propagate the error to sd_event_loop() that caused sd-bus to fail and exit the event loop. Additionally, the error is now also properly propagated to outstanding reply callbacks for async dbus calls started with sd_bus_call_async() and friends, whereas before we always used ETIMEDOUT for these calls which is extremely confusing for users.  Why is this confusing? We always start sd-bus instances asynchronously, in other words, sd_bus_start() will not actually wait until the bus instance is connected, but it'll happen in the background, either driven by the first sd_bus_call() when there is no event loop or by sd-event when there is an event loop attached to the sd-bus instance. Assuming an event loop is attached, when we fail to connect to the bus, the sd-bus instance will close down and the first async method call we queued will fail with ETIMEDOUT. Nowhere in this process do we inform the user that we failed to connect to the bus because of e.g. a permission error, except for a debug log message.  By propagating the error to sd_event_exit() if exit-on-disconnect is enabled and always propagating it to outstanding reply callbacks, debugging failures becomes much easier as users will now get the actual error code causing the bus instance to close down instead of ETIMEDOUT and 1 respectively.",https://github.com/systemd/systemd/commit/cf063b8a1c3a04ba36a9ee11d06ff9a5f342cc36
systemd/systemd,https://github.com/systemd/systemd,dff4fb7,Luca Boccassi,2025-11-20T14:33:30Z,"test: skip test-loop-block udev part in chroot too  Same reason as containers, need full udev/uevent machinery for this",https://github.com/systemd/systemd/commit/dff4fb7c3544a34e914d367967cd3c0f14840d07
systemd/systemd,https://github.com/systemd/systemd,38e9d40,Matteo Croce,2025-11-17T16:30:34Z,"oomd: check if a cgroup can be killed before attempting to kill it  On OOM event, oomd tries to kill a cgroup until it succeedes. The kill can fail with EPERM in case a pid is not killed, this leaves the cgroup with only half of the processed killed. This is unlikely but theoretically possible in a user namespace, where systemd run as root inside the container and tries to kill a cgroup with some PID from the host namespace.  To address this, send the SIG0 signal to all the processes to check that we have privileges to kill them.",https://github.com/systemd/systemd/commit/38e9d40c8097363b1e8fa025ef06865dadb0a3ac
systemd/systemd,https://github.com/systemd/systemd,f295cfa,Zbigniew Jędrzejewski-Szmek,2025-11-20T19:10:44Z,"apparmor: move dlopen() into mac_apparmor_use() check (#39826)  This mirrors what we do for mac_selinux_use(), which also loads libselinux.",https://github.com/systemd/systemd/commit/f295cfa1a758147226308f802c19a12fd1a95715
systemd/systemd,https://github.com/systemd/systemd,4902a7f,Luca Boccassi,2025-11-20T15:36:39Z,"virt: debug log when inode_same() fails  If this fails with an error there's no log messages and tests typically don't log it either as they just check, so add a message to aid in debugging",https://github.com/systemd/systemd/commit/4902a7f18d6626110a2e47832d91785b049961e2
systemd/systemd,https://github.com/systemd/systemd,6629107,Daan De Meyer,2025-11-20T12:18:30Z,"mkosi: Drop IWYU  We use clang-tidy's include checker, so let's stop installing IWYU.",https://github.com/systemd/systemd/commit/66291074046a8d43a9293eda0676a8d294cd5fdf
systemd/systemd,https://github.com/systemd/systemd,933c690,Zbigniew Jędrzejewski-Szmek,2025-11-20T13:27:57Z,"basic/terminal-util: operate on one fd in terminal_get_size_by_dsr()  This moves the open call earlier, so that we do any state-changing operations if we actually managed to open the nonblocking fd. This makes the code more robust because if the fdreopen call fails, we won't make modifications to the state of the terminal.",https://github.com/systemd/systemd/commit/933c6900308fe321b8f7aa765df293969d81e399
systemd/systemd,https://github.com/systemd/systemd,2e5f717,Christoph Anton Mitterer,2025-11-20T15:17:45Z,man: fix typo,https://github.com/systemd/systemd/commit/2e5f717545e2664ce2ed6b2dd84744b3789156b1
systemd/systemd,https://github.com/systemd/systemd,e1f9de9,Daan De Meyer,2025-11-20T14:08:15Z,"mkosi: update fedora commit reference to 12f95f807fef5075a8842dd107f83b4c41d5ac26  * 12f95f807f Wrap %autosetup in %_build_in_place check * f9916b6fd1 Revert ""Use %autosetup -C"" * 044cff4700 Allow empower group * a0acca210d Version 259~rc1 * e455d82fd8 Add various extra explicit Requires * 1a7506a105 Version 258.2 * 256463d690 Restore runlevelX.target units * b17d9c3474 Use %autosetup -C * fe18084a05 Remove hack to stop systemd-networkd-resolve-hook.socket",https://github.com/systemd/systemd/commit/e1f9de973922ca2f5337f0c01a59f0f62224b392
systemd/systemd,https://github.com/systemd/systemd,53eda86,Mike Yuan,2025-11-20T13:01:31Z,"labeler: shell-completion -> ""shell completion""  The latter is what we actually use. We didn't observe the issue because the rule was effectively inactive before bcf95c41161fb4d541002777bd6ab3374d72fe39.",https://github.com/systemd/systemd/commit/53eda862c169ee74c36512d8ca6d6adcc13b54d0
systemd/systemd,https://github.com/systemd/systemd,6df082a,Yu Watanabe,2025-11-20T14:07:00Z,pam_systemd: fix OSC write failure message appearing in error logs (#39791),https://github.com/systemd/systemd/commit/6df082a039078d8e13bee786eb059d30c6ce7d91
systemd/systemd,https://github.com/systemd/systemd,b5dbe71,Lennart Poettering,2025-11-20T13:20:37Z,apparmor-util: shortcut mac_apparmor_use() if compile-time disabled,https://github.com/systemd/systemd/commit/b5dbe7179be8815b289e571f37e79952e1bba9de
systemd/systemd,https://github.com/systemd/systemd,c3b3eea,Lennart Poettering,2025-11-20T13:09:15Z,"apparmor: move dlopen() into mac_apparmor_use() check  This mirrors what we do for mac_selinux_use(), which also loads libselinux.",https://github.com/systemd/systemd/commit/c3b3eea2e56d7904ace7dd72c8520933ebef843e
systemd/systemd,https://github.com/systemd/systemd,8137c6b,Daan De Meyer,2025-11-20T10:36:30Z,mkosi: Install valgrind in tools tree,https://github.com/systemd/systemd/commit/8137c6bf2d36ada460dd8863e4c0d75c00a6d1b7
systemd/systemd,https://github.com/systemd/systemd,6c32492,val4oss,2025-11-19T09:18:30Z,pam_systemd: fix OSC write failure message appearing in error logs  Create and use new function pam_debug_syslog_errno() instead to ensure the message only appears when debug mode is enabled. Pass the debug flag to open_osc_context() and close_osc_context() to support this change.,https://github.com/systemd/systemd/commit/6c3249293221c9bade4fd645da80b1566069d73b
systemd/systemd,https://github.com/systemd/systemd,bc9dc63,val4oss,2025-11-19T09:18:41Z,pam-util: fix pam_syslog_errno() ignoring the level parameter  The function accepts a level parameter but was always logging at LOG_ERR. Fix by passing the level parameter to sym_pam_vsyslog() instead of hardcoding LOG_ERR.  This caused debug and warning messages to incorrectly appear in error logs.,https://github.com/systemd/systemd/commit/bc9dc63f4f24eb989e92d4a96e46da279528a767
systemd/systemd,https://github.com/systemd/systemd,3c6af4c,Daan De Meyer,2025-11-20T08:56:41Z,Make file-hierarchy.7 link to two online docs and drop most of the contents (#39412),https://github.com/systemd/systemd/commit/3c6af4cc792abb7f06cb08b75f5f5c20378cda0f
systemd/systemd,https://github.com/systemd/systemd,b3d99e2,Christoph Anton Mitterer,2025-10-18T03:30:12Z,"man: improve BindsTo= documentation  Make “effect” plural to indicate that BindsTo= also includes the other effects of Requires= (like starting the listed units).  The documentation of Requires= already describes that the configuring unit is stopped/restarted if any of the list units is explicitly stopped/restarted. This made the previous wording “in addition to the effect of Requires, it declares that if the unit bound to is stopped, this unit will be stopped too.” ambiguous – this is no in addition, Requires= already does that, at least for some (namely the explicit) cases. Resolve this by making it clear what the actual difference to Requires= is and further mention that this also includes failed units.  Signed-off-by: Christoph Anton Mitterer <mail@christoph.anton.mitterer.name>",https://github.com/systemd/systemd/commit/b3d99e23089bd65e1f8c445127a0963f1008f8c0
systemd/systemd,https://github.com/systemd/systemd,3605b3b,Frantisek Sumsal,2025-11-19T13:44:13Z,"timer: rebase last_trigger timestamp if needed  After bdb8e584f4509de0daebbe2357d23156160c3a90 we stopped rebasing the next elapse timestamp unconditionally and the only case where we'd do that was when both last trigger and last inactive timestamps were empty. This covered timer units during boot just fine, since they would have neither of those timestamps set. However, persistent timers (Persistent=yes) store their last trigger timestamp on a persistent storage and load it back after reboot, so the rebasing was skipped in this case.  To mitigate this, check the last_trigger timestamp is older than the current machine boot - if so, that means that it came from a stamp file of a persistent timer unit and we need to rebase it to make RandomizedDelaySec= work properly.  Follow-up for bdb8e584f4509de0daebbe2357d23156160c3a90.  Resolves: #39739",https://github.com/systemd/systemd/commit/3605b3ba87833a9919bfde05952a7d9de10499a2
systemd/systemd,https://github.com/systemd/systemd,72cbc28,Zbigniew Jędrzejewski-Szmek,2025-11-20T07:35:21Z,meson: sort shell completions and exit earlier when shell completion is disabled (#39816),https://github.com/systemd/systemd/commit/72cbc28347bc1541cb3fb32207cf25f8d39fed6b
systemd/systemd,https://github.com/systemd/systemd,0f7d3e3,Zbigniew Jędrzejewski-Szmek,2025-11-20T07:29:32Z,Avoid multiple evaluations in STRERROR_XYZ() macros (#39794),https://github.com/systemd/systemd/commit/0f7d3e34e11f5dba3b5183656e966fb36bb99d79
systemd/systemd,https://github.com/systemd/systemd,d2b8e42,Yu Watanabe,2025-11-20T05:46:18Z,meson: exit earlier from the subdirectory when bash/zshcompletiondir is 'no',https://github.com/systemd/systemd/commit/d2b8e42742689730b7484f9a8ffb77753a515c61
systemd/systemd,https://github.com/systemd/systemd,c74dc8c,Yu Watanabe,2025-11-20T05:39:13Z,meson: sort shell completions,https://github.com/systemd/systemd/commit/c74dc8cf14c4d37d6d84b17dd95e96919fe4aa9a
systemd/systemd,https://github.com/systemd/systemd,f16518c,Luca Boccassi,2025-11-20T02:09:48Z,shell-completion: add bash script for varlinkctl,https://github.com/systemd/systemd/commit/f16518ce862f5d0dc4d8098dd87b3ef3a5d719fe
systemd/systemd,https://github.com/systemd/systemd,70fa7d4,Yu Watanabe,2025-11-20T04:23:51Z,"core: SMACK label to Unix socket path and FD (#39772)  Currently, when a socket unit specifies SmackLabel=, the label is not applied to the underlying Unix socket file or its file descriptor.  This change ensures that the SMACK label is applied both to the Unix socket path on the filesystem and to all associated socket FDs when the socket is created.  Testing:  - Tested on Fedora 43 with kernel 6.17.7 with SMACK enabled. - Created a systemd socket unit:      [Unit]     Description=UNIX socket      [Socket]     ListenStream=/run/test.sock     SmackLabel=label      [Install]     WantedBy=sockets.target  - Created a corresponding service:      [Unit]     Description=UNIX socket service     Requires=test.socket      [Service]     ExecStart=/usr/bin/socat -v - -     StandardInput=socket      [Install]     WantedBy=multi-user.target  - Verified SMACK labels using getfattr:    - Without SmackLabel:     ```     # file: run/test.sock     security.SMACK64=""_""     # file: proc/<pid>/fd/*     security.SMACK64=""*""     ```   - With SmackLabel=label:     ```     # file: run/test.sock     security.SMACK64=""label""     # file: proc/<pid>/fd/*     security.SMACK64=""label""     ```",https://github.com/systemd/systemd/commit/70fa7d4cccfaa7410aed63b97709f6bd19c8371d
systemd/systemd,https://github.com/systemd/systemd,5de3957,Yu Watanabe,2025-11-20T04:20:41Z,Simplify source lists in meson config (#39811),https://github.com/systemd/systemd/commit/5de39570c857f5ec2dae19d42ce23450ee0be912
systemd/systemd,https://github.com/systemd/systemd,a7947d5,Yu Watanabe,2025-11-20T01:08:38Z,NEWS: fix typo,https://github.com/systemd/systemd/commit/a7947d54db8820d26e1cb4da5fbfdea2e3f47753
systemd/systemd,https://github.com/systemd/systemd,5220bb8,Zbigniew Jędrzejewski-Szmek,2025-11-19T10:20:18Z,"meson: automatically add 'extract' to 'sources'  In all cases, everything that we list in 'extract', we also list in 'sources'. We can simplify things by automatically appending the first list to the second.  In the listings, move 'extract' key right below 'sources', since now they are both ""sources"", just with slightly different meanings.",https://github.com/systemd/systemd/commit/5220bb8c3f9a5db745f8cd36f0e539b1e871bbca
systemd/systemd,https://github.com/systemd/systemd,360f750,Marc-Antoine Riou,2025-11-06T10:21:12Z,"socket-label: apply SMACK label to socket and its file descriptor  When a socket unit specifies SmackLabel=, the label was previously not applied to the underlying Unix socket file or its file descriptor. This change ensures that the SMACK label is applied both to the socket path on the filesystem and to the opened socket FD.",https://github.com/systemd/systemd/commit/360f750b01eb713dcf40ac5c3d963b0a6b398e2f
systemd/systemd,https://github.com/systemd/systemd,cb4b369,Yu Watanabe,2025-11-20T00:39:32Z,"socket-label: move prototype of socket_address_listen() and string table for SocketAddressBindIPv6Only  The function socket_address_listen() is declared at shared/socket-label.c, however its prototype was in basic/socket-util.h. This moves the prototype to shared/socket-label.h.  Also, enum SocketAddressBindIPv6Only is not used anymore in basic/*.[ch]. Let's move the definition and its string table to shared/socket-label.[ch].  Follow-up for b25a930f0e2ebe77bc8b0f0acfac8a3b27ef1f0a.",https://github.com/systemd/systemd/commit/cb4b36928a3bae9abe614260f1bd1ef7ab7ff30d
systemd/systemd,https://github.com/systemd/systemd,5feb65c,Yu Watanabe,2025-11-18T20:10:44Z,user-util: avoid double evaluation in STRERROR_USER/GROUP()  Follow-up for 6e6e96f628d352b56fd396cffb311f16839f78fb.,https://github.com/systemd/systemd/commit/5feb65c5b1f75d376fc032ccd1cb87766c5185a9
systemd/systemd,https://github.com/systemd/systemd,459000e,Yu Watanabe,2025-11-18T20:09:02Z,errno-util: avoid double evaluation in STRERROR_OR_EOF()  Follow-up for f69ae8585f5ce6cd8d1e6f3ccd6c9c2cf153e846.,https://github.com/systemd/systemd/commit/459000e8c51b8979a8eb1dfa7f6b241ffe89f7a9
systemd/systemd,https://github.com/systemd/systemd,18f280a,Yu Watanabe,2025-11-18T19:46:25Z,"test: fix tested function name  The test tests STRERROR_OR_EOF(), but logged as STRERROR_OR_ELSE.",https://github.com/systemd/systemd/commit/18f280a478ae85307b4597f7ccd588c860edf42c
systemd/systemd,https://github.com/systemd/systemd,3f91ffe,Yu Watanabe,2025-11-19T23:19:46Z,"core: Verify inherited FDs are writable for stdout/stderr (#39674)  When inheriting file descriptors for stdout/stderr (either from stdin or when making stderr inherit from stdout), we previously just assumed they would be writable and dup'd them. This could lead to broken setups if the inherited FD was actually opened read-only.  Before dup'ing any inherited FDs to stdout/stderr, verify they are actually writable using the new fd_is_writable() helper. If not, fall back to /dev/null (or reopen the terminal in the TTY case) with a warning, rather than silently creating a broken setup where output operations would fail.",https://github.com/systemd/systemd/commit/3f91ffe0fe900660a8c073ec54b3951e33b5c74c
systemd/systemd,https://github.com/systemd/systemd,5b0e262,Quentin Deslandes,2025-11-18T20:36:49Z,network: clear existing routes if Gateway= is empty in [Network]  Add support for an empty Gateway= in [Network] to clear the existing routes. This change will allow users to remove the default route from a drop-in file.,https://github.com/systemd/systemd/commit/5b0e262f451af6b5cab0fdb239512c3ae89c25d0
systemd/systemd,https://github.com/systemd/systemd,9d7a700,Zbigniew Jędrzejewski-Szmek,2025-11-19T15:19:16Z,"man: add 'testing' as one of the suggestions for DEPLOYMENT=  Looking at the list, ""test"" or ""testing"" seems to be a fairly generic entry that is missing from the list of suggestions. I went with ""testing"" because it fits better with the other item, e.g. ""staging"".  In https://github.com/systemd/systemd/issues/38743 ""laboratory"" was also suggested. I didn't include this because that is more about the location, not deployment type. Any of the other deployments could be in a ""laboratory"".  Closes https://github.com/systemd/systemd/issues/38743.",https://github.com/systemd/systemd/commit/9d7a70003dae69a316e378807f7128033e3a0b96
systemd/systemd,https://github.com/systemd/systemd,0b7dfc0,Chris Down,2025-11-19T19:52:02Z,"tests: ASSERT_SIGNAL: Prevent hallucinating parent as child and confusing exit codes with signals (#39807)  This series fixes two distinct, pretty bad bugs in `ASSERT_SIGNAL`. These bugs can allow failing tests to pass, and can also cause the test runner to silently terminate prematurely in a way that looks like success.  This is not theoretical, see https://github.com/systemd/systemd/pull/39674#discussion_r2540552699 for a real case of this happening.  ---  Bug 1: Parent process hallucinates it is the child and re-executes the expression being tested  Previously, assert_signal_internal() returned 0 in two mutually exclusive states:  1. We are the child process (immediately after fork()). 2. We are the parent process, and the child exited normally (status 0).  The macro failed to distinguish these cases. If a child failed to crash as expected, the parent received 0, incorrectly interpreted it as it being the child, and re-executed the test expression inside the parent process.  This can cause tests to falsely pass. The parent would successfully run the expression (which wasn't supposed to crash in the parent), succeed, and call _exit(EXIT_SUCCESS).  The second consequence is silent truncation. When the parent called _exit(), it terminated the entire test runner immediately. Any subsequent tests in the same binary were never executed.  ---  Bug 2: Conflation of exit codes and signals  The harness returned the raw si_status without checking si_code. This meant that an exit code was indistinguishable from a signal number. For example, if a child process failed and called exit(6), the harness reported it as having been killed by SIGABRT (signal 6).  ---  This PR both fixes the bugs and reworks the ASSERT_SIGNAL infrastructure to ensure this is very unlikely to regress:  - assert_signal_internal now returns an explicit control flow enum (FORK_CHILD / FORK_PARENT) separate from the status data. This makes it structurally impossible for the parent to hallucinate that it is the child. - The output parameter is only populated with a signal number if si_code confirms the process was killed by a signal. Normal exits return 0.",https://github.com/systemd/systemd/commit/0b7dfc036d1634cd0997a2c8ba301dc71748c9a0
systemd/systemd,https://github.com/systemd/systemd,6d36d07,Luca Boccassi,2025-11-19T17:30:24Z,docs: elf metadata specs have moved to uapi-group,https://github.com/systemd/systemd/commit/6d36d075998f092105a77d3b97413e905a7143a2
systemd/systemd,https://github.com/systemd/systemd,e21a431,Chris Down,2025-11-19T14:06:03Z,"tests: ASSERT_SIGNAL: Do not allow parent to hallucinate it is the child  assert_signal_internal() returns 0 in two distinct cases:  1. In the child process (immediately after fork returns 0). 2. In the parent process, if the child exited normally (no signal).  ASSERT_SIGNAL fails to distinguish these cases. When a child exited normally (case 2), the parent process receives 0, incorrectly interprets it as meaning it is the child, and re-executes the test expression inside the parent process. Goodness gracious!  This causes two severe test integrity issues:  1. False positives. The parent can run the expression, succeed, and call    _exit(EXIT_SUCCESS), causing the test to pass even though no signal    was raised. 2. Silent truncation. The _exit() call in the parent terminates the test    runner prematurely, preventing subsequent tests in the same file from    running.  Example of the bug in action, from #39674:      ASSERT_SIGNAL(fd_is_writable(closed_fd), SIGABRT)  This test should fail (fd_is_writable does not SIGABRT here), but with the bug, the parent hallucinated being the child, re-ran the expression successfully, and exited with success.  Fix this by refactoring assert_signal_internal() to be much more strict about separating control flow from data.  The signal status is now returned via a strictly typed output parameter, guaranteeing that determining whether we are the child is never conflated with whether the child exited cleanly.",https://github.com/systemd/systemd/commit/e21a431ec45ef11f1dffddef0d16fa4fcaece535
systemd/systemd,https://github.com/systemd/systemd,d759ed5,Chris Down,2025-11-19T13:45:40Z,"tests: ASSERT_SIGNAL: Ensure sanitisers do not mask expected signals  ASAN installs signal handlers to catch crashes like SIGSEGV or SIGILL. When these signals are raised, ASAN traps them, prints an error report, and then typically terminates the process with a different signal (often SIGABRT) or a non-zero exit code.  This interferes with ASSERT_SIGNAL when checking for specific crash signals (for example, checking that a function raises SIGSEGV). In such a case, the test harness sees the ASAN termination signal rather than the expected signal, causing the test to fail.  Fix this by resetting the signal handler to SIG_DFL in the child process immediately before executing the test expression. This ensures the kernel kills the process directly with the expected signal, bypassing ASAN's interceptors.",https://github.com/systemd/systemd/commit/d759ed527c7c75cffcc9b72dd7b3fcf0854bec2f
systemd/systemd,https://github.com/systemd/systemd,39adecf,Chris Down,2025-11-19T08:50:38Z,"tests: ASSERT_SIGNAL: Stop exit codes from masquerading as signals  When a child process exits normally (si_code == CLD_EXITED), siginfo.si_status contains the exit code. When it is killed by a signal (si_code == CLD_KILLED or CLD_DUMPED), si_status contains the signal number.  However, assert_signal_internal() returns si_status blindly. This causes exit codes to be misinterpreted as signal numbers.  This allows failing tests to silently pass if their exit code numerically coincides with the expected signal. For example, a test expecting SIGABRT (6) would incorrectly pass if the child simply exited with status 6 instead of being killed by a signal.  Fix this by checking si_code. Only return si_status as a signal number if the child was actually killed by a signal (CLD_KILLED or CLD_DUMPED). If the child exited normally (CLD_EXITED), return 0 to indicate that no signal occurred.",https://github.com/systemd/systemd/commit/39adecfcd84250f7e382c220ec7bcb2b0faa5193
systemd/systemd,https://github.com/systemd/systemd,171ceb4,Chris Down,2025-11-10T20:26:10Z,"core: Verify inherited FDs are writable for stdout/stderr  When inheriting file descriptors for stdout/stderr (either from stdin or when making stderr inherit from stdout), we previously just assumed they would be writable and dup'd them. This could lead to broken setups if the inherited FD was actually opened read-only.  Before dup'ing any inherited FDs to stdout/stderr, verify they are actually writable using the new fd_is_writable() helper. If not, fall back to /dev/null (or reopen the terminal in the TTY case) with a warning, rather than silently creating a broken setup where output operations would fail.",https://github.com/systemd/systemd/commit/171ceb4a00294c700c0ba6906a3a3abad846699e
