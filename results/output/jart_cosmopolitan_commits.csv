项目名称,项目URL,提交ID,提交者,提交时间,提交信息,提交链接
jart/cosmopolitan,https://github.com/jart/cosmopolitan,b444b3a,Justine Tunney,2025-12-02T08:12:39Z,"Fix regressions in strcasechr, wcschr, strchr16  This change fixes a regression introduced by string library improvements in 5ddb5c2adad79407fb800fce47f389611f90a511 that could cause wcschr(s,0) to return NULL rather than a pointer to the end of the string.",https://github.com/jart/cosmopolitan/commit/b444b3a6e0d442162f800142a349371386b374c6
jart/cosmopolitan,https://github.com/jart/cosmopolitan,b0fdf97,Justine Tunney,2025-11-19T02:30:50Z,Syntax highlight .inc files,https://github.com/jart/cosmopolitan/commit/b0fdf97054e13f4ad5292d0d4e5cfdf72cbc743a
jart/cosmopolitan,https://github.com/jart/cosmopolitan,2f78645,Justine Tunney,2025-11-19T01:24:31Z,Fix VSCode,https://github.com/jart/cosmopolitan/commit/2f786453ee82b2f179baff32a94f15544aa81469
jart/cosmopolitan,https://github.com/jart/cosmopolitan,694ef1a,Justine Tunney,2025-11-18T22:12:55Z,Remove optlinux from github actions  The cosmocc -moptlinux mode assumes you have an Intel / AMD CPU with AVX however the GA instances we've been getting are faulting on AVX opcodes.,https://github.com/jart/cosmopolitan/commit/694ef1aa8bbf386af95ba09bc2081e511566961c
jart/cosmopolitan,https://github.com/jart/cosmopolitan,bc0fc70,Justine Tunney,2025-11-18T20:31:12Z,Remove more miniaudio.h ifdefs,https://github.com/jart/cosmopolitan/commit/bc0fc702fefc4c405a979053ad986a6d691973a0
jart/cosmopolitan,https://github.com/jart/cosmopolitan,bea62f3,Justine Tunney,2025-11-18T19:52:06Z,Upgrade miniaudio to v0.11.23,https://github.com/jart/cosmopolitan/commit/bea62f363161a77ede3f3e8d0e7765bbaccfa94b
jart/cosmopolitan,https://github.com/jart/cosmopolitan,dee2527,Gautham,2025-11-17T19:17:02Z,"Use --std=gnu17 for cosmocc (#1452)  Third party libraries in superconfigure have compiler checks, that error out for C23, so the preference would be to use C17 for a while until all those libraries are updated.",https://github.com/jart/cosmopolitan/commit/dee25272f111f63c127175b2d54f19a6dc0505bd
jart/cosmopolitan,https://github.com/jart/cosmopolitan,5ddb5c2,Justine Tunney,2025-11-17T05:13:56Z,"Make improvements  - Open flags (e.g. O_CREAT) are now constants - Error numbers (e.g. EINVAL) are now constants - Signal numbers (e.g. SIGINT) are now constants - fcntl() file locks now work properly on Windows - Significantly improve Windows path handling code - Implement true vfork() on Windows and make fork() faster - Implement scanf %[charset] support and improve conformance - Introduce $COSMOSDRIVE so you can use Windows 11 dev drives - Fix stdio seek/tell bug and make stdio locks faster and safer - Change TLS ABI to use tlscc wrapper that inserts function calls - Make malloc() faster on all platforms using new cosmo_shard() api - Make malloc() fast like tcmalloc on Linux using restartable sequences - Improve fsync() and fdatasync() polyfills so they abstract robustness - Fix CLOCK_BOOTTIME and CLOCK_MONOTONIC on XNU so it reflects uptime - Fix bugs in Windows overlapped code that could possibly cause crash - Fix bugs in Windows signal code that could possibly cause crash - Make symlinks with multiple components work right on Windows - Add FreeBSD ELF note to remove SIGBUS issue and other quirks - Support symlinks on Windows under non-administrator accounts - Make kisdangerous() scalable by adding radix trie to mmap() - Make large realloc() operations zero-cost on all platforms - Fix bugs in readdir() on Windows where d_reclen wasn't set - Make all system call wrappers memory safe (raises EFAULT) - Fix bugs in poll() and select() on Windows with 64+ fds - Fix bug in madvise() on Windows that could cause crash - Support WUNTRACED, SIGSTOP, and SIGCONT on Windows - Increase x86 image base from 0x400000 to 0x4200000 - Introduce -msysv and -mtinylinux flags to cosmocc - Fix issues with siglongjmp() on XNU and NetBSD - Make pthread_barrier_wait() work correctly - Make clock_gettime() faster on FreeBSD ARM - Support file mode bits better on Windows - Improve performance of string libraries - Raise EILSEQ when creating evil paths - Fix std::terminate to not use malloc - Modernize more c11 and c23 features - Make pthread_once() exception safe - Support RLIMIT_CPU on Windows - Introduce HACL* cryptography - Introduce cosmopolitan make - Introduce fasterzip program - Introduce open_memstream() - Introduce dedupe program - Introduce arc4random() - Introduce f2fs support",https://github.com/jart/cosmopolitan/commit/5ddb5c2adad79407fb800fce47f389611f90a511
jart/cosmopolitan,https://github.com/jart/cosmopolitan,f1dc5cf,Alexar,2025-11-15T16:28:34Z,"Make redbean probe for port on bind failure (#1451)  When redbean is starting up, if you don't explicitly specify a port then it'll choose the default one, which is 8080. If that port is in use then redbean will increment the port number up to 20 times before it gives up",https://github.com/jart/cosmopolitan/commit/f1dc5cff44cfad5d11ce8e652d4070716a167909
jart/cosmopolitan,https://github.com/jart/cosmopolitan,f1e83d5,Hugues Morisset,2025-05-21T08:20:22Z,Add IPv6 support to getifaddrs() on Linux (#1415),https://github.com/jart/cosmopolitan/commit/f1e83d52403060d674161944e849b51f95707c9a
jart/cosmopolitan,https://github.com/jart/cosmopolitan,2fe8338,Steven Dee (Jōshin),2025-05-21T05:17:55Z,"Better mtimes for github workflow build cache (#1421)  Saves and restores mtimes to a file, also covering the `o/` directory to hopefully preserve make dependency information better.",https://github.com/jart/cosmopolitan/commit/2fe8338f92804e5d18dff5c5aa89409fa67cb472
jart/cosmopolitan,https://github.com/jart/cosmopolitan,4ca513c,ShalokShalom,2025-04-25T22:47:50Z,Add C++ to README (#1407),https://github.com/jart/cosmopolitan/commit/4ca513cba2cc8f00b0ab96805496a187a9f68c5c
jart/cosmopolitan,https://github.com/jart/cosmopolitan,455910e,Steven Dee (Jōshin),2025-04-21T12:36:50Z,Make more shared_ptr fixes (#1401)  * Make refcount reads explicitly atomic * Consistently put `const` in the same place * Write the general `operator=` on `weak_ptr`,https://github.com/jart/cosmopolitan/commit/455910e8f261961a84063e5a4213d8f935153480
jart/cosmopolitan,https://github.com/jart/cosmopolitan,9c68bc1,Steven Dee (Jōshin),2025-04-17T22:55:27Z,"Cache .cosmocc and o for github workflows (#1400)  Uses GitHub’s actions/cache@v4 to store the cosmocc distribution and the output directory between runs of the build workflow, with the version of cosmocc as the cache key.  Upgrades to actions/checkout@v4.",https://github.com/jart/cosmopolitan/commit/9c68bc19b57155b8627852aba3b6c8d766206579
jart/cosmopolitan,https://github.com/jart/cosmopolitan,66d1050,Steven Dee (Jōshin),2025-04-17T21:01:20Z,Correctly implement weak_ptr assignment/copy/moves (#1399),https://github.com/jart/cosmopolitan/commit/66d1050af64c175f232d5bcb643741662fa1477f
jart/cosmopolitan,https://github.com/jart/cosmopolitan,fbc4fcb,Justine Tunney,2025-03-30T22:25:20Z,Get GDB working  You can now say `gdb hello.com.dbg` and it'll work perfectly.,https://github.com/jart/cosmopolitan/commit/fbc4fcbb71cf2a54d1c2a4adab5d11af53b1c3f4
jart/cosmopolitan,https://github.com/jart/cosmopolitan,afc986f,Steven Dee (Jōshin),2025-03-25T05:49:34Z,"Fix shared_ptr<T>::owner_before (#1390)  `!(a < b)` is not the same as `b < a`.  I think I originally wrote it this way to avoid making weak_ptr a friend of shared_ptr, but weak_ptr already is a friend.",https://github.com/jart/cosmopolitan/commit/afc986f741ffa937f318c2ed536f979ffa8651c6
jart/cosmopolitan,https://github.com/jart/cosmopolitan,5eb7cd6,Derek,2025-03-21T23:08:25Z,Add support for getcpu() system call to pledge() (#1387)  This fixes redbean Lua tests which were failing with SIGSYS on Linux.,https://github.com/jart/cosmopolitan/commit/5eb7cd664393d8a3420cbfe042cfc3d7c7b2670d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,a8ed4fd,Brett Jia,2025-03-13T00:37:46Z,"Add NetBSD evbarm and fix segfault (#1384)  This change fixes a segmentation fault when comparing loaders that don't have a target kernel set. Additionally, adds evbarm, which is the output of uname -m on NetBSD on aarch64.",https://github.com/jart/cosmopolitan/commit/a8ed4fdd098b4be27ead8fc14d40c8dc7ef77491
jart/cosmopolitan,https://github.com/jart/cosmopolitan,7b69652,Brett Jia,2025-03-12T20:26:51Z,"Add -k OSNAME flag to apelink (#1383)  Let's say you pass the `-M blink-mips.elf` flag to apelink, so that your ape binary will bundle a compressed build of blink, and the shell script will extract that binary and launch your program under it, if running on a MIPS system. However, for any given microprocessor architecture, we'll need a separate loader for each operating system. The issue is ELF OSABI isn't very useful. As an example, SerenityOS and Linux both have SYSV in the OSABI field. So to tell their binaries apart we'd have to delve into various other conventions, like special sections and PT_NOTE structures.  To make things simple this change introduces the `-k OS` flag to apelink which generate shell script content that ensures `OS` matches `uname -s` before attempting to execute a loader. For example, you could say:      apelink -k Linux -M blink-linux-arm.elf -M blink-linux-mips.elf \             -k Darwin -M blink-darwin-ppc.elf \             ...  To introduce support for old 32-bit architectures on multiple OSes, when building your cosmo binary.",https://github.com/jart/cosmopolitan/commit/7b696528543a8d7272281dc18ad88240466d58fa
jart/cosmopolitan,https://github.com/jart/cosmopolitan,b235492,Leal G.,2025-03-12T00:59:34Z,Add usertrust certificate (#1382)  Bundle USERTrust CA certificates to /usr/share/ssl/root for TLS verifies,https://github.com/jart/cosmopolitan/commit/b235492e715df777bd14424dc1b7f9cd0605b379
jart/cosmopolitan,https://github.com/jart/cosmopolitan,fc81fd8,Brett Jia,2025-03-06T18:26:31Z,"Support additional architectures in apelink (#1381)  This updates apelink to support machine architectures not in the source program input list by adding additional loaders, extracting the correct one that matches the host uname machine. With this change, blink can be supplied as the additional loader to run the program in x86_64 VMs. The change has been verified against blink 1.0, powerpc64le and mips64el in Docker using QEMU.",https://github.com/jart/cosmopolitan/commit/fc81fd8d1605ab36e4bf5922cdb0bffa7045683b
jart/cosmopolitan,https://github.com/jart/cosmopolitan,38930de,Gautham,2025-02-09T05:17:42Z,Make tool for replacing ELF strings (#1344),https://github.com/jart/cosmopolitan/commit/38930de8e08f9de989f3fb06b1cc79f3e977b965
jart/cosmopolitan,https://github.com/jart/cosmopolitan,0e557d0,Brett Jia,2025-02-09T01:46:09Z,"Check downloaded gcc/clang checksums (#1367)  Check sha256 checksums of the downloaded gcc and clang toolchains. It'll allow us to extend trust to external toolchains if building from source.",https://github.com/jart/cosmopolitan/commit/0e557d041dbd928bc7e6223af4b1d49e085dcc68
jart/cosmopolitan,https://github.com/jart/cosmopolitan,1d676b3,Brett Jia,2025-02-09T01:38:00Z,Make cosmoranlib executable (#1366)  Fixes #1325,https://github.com/jart/cosmopolitan/commit/1d676b36e637196b0313a06f8fc54bacb3e3592e
jart/cosmopolitan,https://github.com/jart/cosmopolitan,10a92ce,Brett Jia,2025-02-08T20:45:45Z,"Support building cosmocc on MacOS (#1365)  This updates the cosmocc toolchain packaging script to work on MacOS. It has been tested on GitHub Actions macos-13 (x86_64) and macos-14 (arm64) runners, and is verified to still work on Ubuntu (GitHub Actions runners ubuntu-24.04 and ubuntu-24.04-arm). It'll help bring cosmocc to MacPorts by running the packaging script. We favor `gmake` rather than the `make` command because it distinguishes GNU Make from BSD Make, and Xcode Make. Additionally, APE loader from the bootstrapper toolchain is used instead of a system APE, which may not be available.",https://github.com/jart/cosmopolitan/commit/10a92cee94b1c72a8957dd4e2297f0e4498fedd1
jart/cosmopolitan,https://github.com/jart/cosmopolitan,42a9ed0,A2va,2025-02-08T16:08:08Z,Adds some NT functions (#1358),https://github.com/jart/cosmopolitan/commit/42a9ed01318707894a719ef5858a675ccb0be4fb
jart/cosmopolitan,https://github.com/jart/cosmopolitan,12cb066,Björn Buckwalter,2025-02-08T08:48:38Z,Clarify unix.mapshared versus file locks (#1355),https://github.com/jart/cosmopolitan/commit/12cb0669fb0b5300788b57f358dda85932e4b8c8
jart/cosmopolitan,https://github.com/jart/cosmopolitan,7f6a7d6,rufeooo,2025-02-07T19:42:47Z,Fix sigaction example code (#1363),https://github.com/jart/cosmopolitan/commit/7f6a7d6fffa6bb605611b5b76ff269b876cf2b82
jart/cosmopolitan,https://github.com/jart/cosmopolitan,9f6bf6e,Steven Dee (Jōshin),2025-01-14T00:48:55Z,tool/zsh/mkofs: doas,https://github.com/jart/cosmopolitan/commit/9f6bf6ea71e1385cc34dab0c492773f428d62869
jart/cosmopolitan,https://github.com/jart/cosmopolitan,102edf4,Steven Dee (Jōshin),2025-01-06T04:53:53Z,tool/zsh/mmake: style,https://github.com/jart/cosmopolitan/commit/102edf4ea2805749856094f21ef249c259e83740
jart/cosmopolitan,https://github.com/jart/cosmopolitan,21968ac,Steven Dee (Jōshin),2025-01-06T04:47:34Z,"Standard make path (#1353)  Modifies download-cosmocc.sh to maintain a .cosmocc/current symlink that always points to the most recently downloaded version of cosmocc. We can use this to point at a canonical make for a bootstrapped repository. For first-time builds, we suggest: https://cosmo.zip/pub/cosmos/bin/make and have updated the docs in a few places to mention this.  Fixes the other part of #1346.",https://github.com/jart/cosmopolitan/commit/21968acf99c2f8de5d0cc879c627568db49e0982
jart/cosmopolitan,https://github.com/jart/cosmopolitan,98861b2,Justine Tunney,2025-01-06T04:15:34Z,Make some style fixes to prng code,https://github.com/jart/cosmopolitan/commit/98861b23fccabe552c1bc3b4082aa2991d615001
jart/cosmopolitan,https://github.com/jart/cosmopolitan,dab6d7a,Steven Dee (Jōshin),2025-01-06T03:54:49Z,Resolve multiple definition of __sig (fixes #1346) (#1352),https://github.com/jart/cosmopolitan/commit/dab6d7a345bf3b6a8c60b697e28c1ba2653f6a47
jart/cosmopolitan,https://github.com/jart/cosmopolitan,90119c4,Justine Tunney,2025-01-06T01:04:31Z,Fix 404 url  Closes #1347,https://github.com/jart/cosmopolitan/commit/90119c422c257fd1e91973a8e07879b46cff2dde
jart/cosmopolitan,https://github.com/jart/cosmopolitan,5907304,Justine Tunney,2025-01-05T21:56:24Z,Release Cosmopolitan v4.0.2,https://github.com/jart/cosmopolitan/commit/5907304049f37c9ed77593974d13202829443bea
jart/cosmopolitan,https://github.com/jart/cosmopolitan,035b0e2,Justine Tunney,2025-01-05T21:46:47Z,Attempt to fix MODE=dbg Windows execve() flake,https://github.com/jart/cosmopolitan/commit/035b0e2a623bc61114d8a6495a8a8146a5c3908f
jart/cosmopolitan,https://github.com/jart/cosmopolitan,7b67b20,Justine Tunney,2025-01-05T20:04:39Z,Fix Windows MODE=tiny breakage,https://github.com/jart/cosmopolitan/commit/7b67b20daeb7b564952fc35d372f12758572d7da
jart/cosmopolitan,https://github.com/jart/cosmopolitan,f0b0f92,Himanshu Pal,2025-01-05T21:59:10Z,"Enable sqlite3 serialization in redbean (#1349)  This fixes a failing demo page, that requires us to enable serialization in the lsqlite3 library that's used by the redbean server.",https://github.com/jart/cosmopolitan/commit/f0b0f926bf23e2eeb52c82abcefade223bdb135e
jart/cosmopolitan,https://github.com/jart/cosmopolitan,29eb7e6,Justine Tunney,2025-01-05T17:24:17Z,"Fix fork() regression on Windows  Recent optimizations to fork() introduced a regression, that could cause the subprocess to fail unexpectedly, when TlsAlloc() returns a different index. This is because we were burning the indexes into the displacement of x86 opcodes. So when fork() happened and the executable memory copied it would use the old index. Right now the way this is being solved is to not copy the executable on fork() and then re-apply code changes. If you need to be able to preserve self-modified code on fork, reach out and we can implement a better solution for you. This gets us unblocked quickly.",https://github.com/jart/cosmopolitan/commit/29eb7e67bbda62eb630c47b4cc515e88a4f13447
jart/cosmopolitan,https://github.com/jart/cosmopolitan,f71f61c,Justine Tunney,2025-01-05T07:37:32Z,Add some temporary logging statements,https://github.com/jart/cosmopolitan/commit/f71f61cd402c7f7f0145af5129e41f6a50933f02
jart/cosmopolitan,https://github.com/jart/cosmopolitan,53c6edf,Justine Tunney,2025-01-05T05:27:55Z,Make correction to last change,https://github.com/jart/cosmopolitan/commit/53c6edfd183f89cfb1eda22a27309ec7211ba4d7
jart/cosmopolitan,https://github.com/jart/cosmopolitan,42a3bb7,Justine Tunney,2025-01-05T05:11:53Z,"Make execve() linger when it can't spoof parent  It's now possible to use execve() when the parent process isn't built by cosmo. In such cases, the current process will kill all threads and then linger around, waiting for the newly created process to die, and then we propagate its exit code to the parent. This should help bazel and others  Allocating private anonymous memory is now 5x faster on Windows. This is thanks to VirtualAlloc() which is faster than the file mapping APIs. The fork() function also now goes 30% faster, since we are able to avoid the VirtualProtect() calls on mappings in most cases now.  Fixes #1253",https://github.com/jart/cosmopolitan/commit/42a3bb729aecc1e45d2e560d8a26712dc3bf7dc5
jart/cosmopolitan,https://github.com/jart/cosmopolitan,c97a858,Justine Tunney,2025-01-04T08:20:45Z,Remove missing definitions,https://github.com/jart/cosmopolitan/commit/c97a858470cbdb4cc3ed33d7bbf009421ecdd7ed
jart/cosmopolitan,https://github.com/jart/cosmopolitan,4acd12a,Justine Tunney,2025-01-04T03:51:34Z,Release Cosmopolitan v4.0.1,https://github.com/jart/cosmopolitan/commit/4acd12a5140c413f3d46056d2d27465d40fb744e
jart/cosmopolitan,https://github.com/jart/cosmopolitan,b734eec,Justine Tunney,2025-01-04T03:51:09Z,Test restricting tests to single cpu,https://github.com/jart/cosmopolitan/commit/b734eec83612148742c6e4d54e0c9d4e56243bd3
jart/cosmopolitan,https://github.com/jart/cosmopolitan,fe01642,Justine Tunney,2025-01-04T03:01:58Z,Add missing lock to fork() on Windows,https://github.com/jart/cosmopolitan/commit/fe01642a20271a8f2fa78fb4c0e55fd20e2bdc66
jart/cosmopolitan,https://github.com/jart/cosmopolitan,e939659,Justine Tunney,2025-01-04T01:28:39Z,"Fix ordering of pthread_create(pthread_t *thread)  This change fixes a bug where signal_latency_async_test would flake less than 1/1000 of the time. What was happening was pthread_kill(sender_thr) would return EFAULT. This was because pthread_create() was not returning the thread object pointer until after clone() had been called. So it was actually possible for the main thread to stall after calling clone() and during that time the receiver would launch and receive a signal from the sender thread, and then fail when it tried to send a pong. I thought I'd use a barrier at first, in the test, to synchronize thread creation, but I firmly believe that pthread_create() was to blame and now that's fixed",https://github.com/jart/cosmopolitan/commit/e939659b70a22d07e858f545a0a702467b1db818
jart/cosmopolitan,https://github.com/jart/cosmopolitan,ed6d133,Justine Tunney,2025-01-04T01:27:13Z,Use tgkill() on Linux and FreeBSD  This eliminates the chance of rare bugs when thread IDs are recycled.,https://github.com/jart/cosmopolitan/commit/ed6d133a27eb297cc97695448bfd3f7eb145670e
jart/cosmopolitan,https://github.com/jart/cosmopolitan,97fc2aa,Justine Tunney,2025-01-03T06:27:34Z,Release Cosmopolitan v4.0.0,https://github.com/jart/cosmopolitan/commit/97fc2aab41564384290b1b5d57568cd62bce4b94
jart/cosmopolitan,https://github.com/jart/cosmopolitan,662e7b2,Justine Tunney,2025-01-03T06:25:29Z,Remove pthread_setcanceltype() from non-dbg strace,https://github.com/jart/cosmopolitan/commit/662e7b217fbf2775c2e1b1b6748700274675cab6
jart/cosmopolitan,https://github.com/jart/cosmopolitan,27f2777,Justine Tunney,2025-01-03T06:19:49Z,Fix aarch64 build,https://github.com/jart/cosmopolitan/commit/27f2777cc67accdab4063a3de5ca2b8441e177e5
jart/cosmopolitan,https://github.com/jart/cosmopolitan,538ce33,Justine Tunney,2025-01-03T03:09:57Z,Fix fork thread handle leak on windows,https://github.com/jart/cosmopolitan/commit/538ce338f40446b12590a61fdf6e45cee08e9355
jart/cosmopolitan,https://github.com/jart/cosmopolitan,a15958e,Justine Tunney,2025-01-03T02:44:07Z,Remove some legacy cruft  Function trace logs will report stack usage accurately. It won't include the argv/environ block. Our clone() polyfill is now simpler and does not use as much stack memory. Function call tracing on x86 is now faster too,https://github.com/jart/cosmopolitan/commit/a15958edc62bd9faf4407ec36dae2886b0ceeebc
jart/cosmopolitan,https://github.com/jart/cosmopolitan,8db646f,Justine Tunney,2025-01-02T17:15:52Z,Fix bug with systemvpe()  See #1253,https://github.com/jart/cosmopolitan/commit/8db646f6b212dd3b4040b23110dbe34a9d4eec5e
jart/cosmopolitan,https://github.com/jart/cosmopolitan,fde03f8,Justine Tunney,2025-01-02T16:07:15Z,"Remove leaf attribute where appropriate  This change fixes a bug where gcc assumed thread synchronization such as pthread_cond_wait() wouldn't alter static variables, because the headers were using __attribute__((__leaf__)) inappropriately.",https://github.com/jart/cosmopolitan/commit/fde03f84878f8efc45a61269fe2b4a83cb8bee31
jart/cosmopolitan,https://github.com/jart/cosmopolitan,f24c854,Justine Tunney,2025-01-02T06:25:22Z,"Write more runtime tests and fix bugs  This change adds tests for the new memory manager code particularly with its windows support. Function call tracing now works reliably on Silicon since our function hooker was missing new Apple self-modifying code APIs  Many tests that were disabled a long time ago on aarch64 are reactivated by this change, now that arm support is on equal terms with x86. There's been a lot of places where ftrace could cause deadlocks, which have been hunted down across all platforms thanks to new tests. A bug in Windows's kill() function has been identified.",https://github.com/jart/cosmopolitan/commit/f24c854b281855eb19742ffd38f9877b2eed0b1a
jart/cosmopolitan,https://github.com/jart/cosmopolitan,0b3c81d,Justine Tunney,2025-01-01T12:59:38Z,Make fork() go 30% faster  This change makes fork() go nearly as fast as sys_fork() on UNIX. As for Windows this change shaves about 4-5ms off fork() + wait() latency. This is accomplished by using WriteProcessMemory() from the parent process to setup the address space of a suspended process; it is better than a pipe,https://github.com/jart/cosmopolitan/commit/0b3c81dd4e4a630d541c6f24abd0708984b16b4d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,98c5847,Justine Tunney,2024-12-31T08:55:15Z,"Fix fork waiter leak in nsync  This change fixes a bug where nsync waiter objects would leak. It'd mean that long-running programs like runitd would run out of file descriptors on NetBSD where waiter objects have ksem file descriptors. On other OSes this bug is mostly harmless since the worst that can happen with a futex is to leak a little bit of ram. The bug was caused because tib_nsync was sneaking back in after the finalization code had cleared it. This change refactors the thread exiting code to handle nsync teardown appropriately and in making this change I found another issue, which is that user code which is buggy, and tries to exit without joining joinable threads which haven't been detached, would result in a deadlock. That doesn't sound so bad, except the main thread is a joinable thread. So this deadlock would be triggered in ways that put libc at fault. So we now auto-join threads and libc will log a warning to --strace when that happens for any thread",https://github.com/jart/cosmopolitan/commit/98c584772716c96b12dde420687c42237c401c3b
jart/cosmopolitan,https://github.com/jart/cosmopolitan,fd7da58,Justine Tunney,2024-12-30T11:03:43Z,Introduce example flash card program named rote,https://github.com/jart/cosmopolitan/commit/fd7da586b58a4fa17a5a3e516d9c4a5f24c7e39a
jart/cosmopolitan,https://github.com/jart/cosmopolitan,a51ccc8,Justine Tunney,2024-12-30T11:03:32Z,Remove old shuffle header,https://github.com/jart/cosmopolitan/commit/a51ccc8fb134099ea9efc624bec691e8cb02240c
jart/cosmopolitan,https://github.com/jart/cosmopolitan,c7e3d9f,Justine Tunney,2024-12-30T09:37:14Z,Make recursive mutexes slightly faster,https://github.com/jart/cosmopolitan/commit/c7e3d9f7ffe713e9e48701bfb6088d537f41403d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,9ba5b22,Justine Tunney,2024-12-29T08:05:59Z,Unblock stalled i/o signals on windows,https://github.com/jart/cosmopolitan/commit/9ba5b227d9157c29bbea2d9da0ab45b33c9b0e54
jart/cosmopolitan,https://github.com/jart/cosmopolitan,aca4214,Justine Tunney,2024-12-29T01:08:18Z,Simplify memory manager code,https://github.com/jart/cosmopolitan/commit/aca4214ff64bc565a968ba92a52781369003391b
jart/cosmopolitan,https://github.com/jart/cosmopolitan,379cd77,Justine Tunney,2024-12-27T09:03:11Z,"Improve memory manager and signal handling  On Windows, mmap() now chooses addresses transactionally. It reduces the risk of badness when interacting with the WIN32 memory manager. We don't throw darts anymore. There is also no more retry limit, since we recover from mystery maps more gracefully. The subroutine for combining adjacent maps has been rewritten for clarity. The print maps subroutine is better  This change goes to great lengths to perfect the stack overflow code. On Windows you can now longjmp() out of a crash signal handler. Guard pages previously weren't being restored properly by the signal handler. That's fixed, so on Windows you can now handle a stack overflow multiple times. Great thought has been put into selecting the perfect SIGSTKSZ constants so you can save sigaltstack() memory. You can now use kprintf() with 512 bytes of stack available. The guard pages beneath the main stack are now recorded in the memory manager.  This change fixes getcontext() so it works right with the %rax register.",https://github.com/jart/cosmopolitan/commit/379cd770782a051c51fca0646bbb79732b29c6df
jart/cosmopolitan,https://github.com/jart/cosmopolitan,36e5861,Justine Tunney,2024-12-26T03:43:43Z,Reduce stack virtual memory consumption on Linux,https://github.com/jart/cosmopolitan/commit/36e5861b0c88cebd27c08a8433aed0e32a14e7f0
jart/cosmopolitan,https://github.com/jart/cosmopolitan,cc8a9eb,Justine Tunney,2024-12-24T20:20:48Z,Document execve() limitation on Windows  Closes #1253,https://github.com/jart/cosmopolitan/commit/cc8a9eb93c97bec3e139f384353d82f205d55fd7
jart/cosmopolitan,https://github.com/jart/cosmopolitan,0158579,Justine Tunney,2024-12-24T20:16:50Z,Use ape interpreter in flakes program,https://github.com/jart/cosmopolitan/commit/015857949359ba9afa647e5a3ff2ed03e5d9f88d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,2de3845,Justine Tunney,2024-12-24T19:34:42Z,Build tool for hunting down flakes,https://github.com/jart/cosmopolitan/commit/2de3845b25ad0d25e258405df8b89dc447accdb0
jart/cosmopolitan,https://github.com/jart/cosmopolitan,93e22c5,Justine Tunney,2024-12-24T18:30:59Z,Reduce pthread memory usage,https://github.com/jart/cosmopolitan/commit/93e22c581f98fcbd8e0a544ede4a797361448d85
jart/cosmopolitan,https://github.com/jart/cosmopolitan,ec2db4e,Justine Tunney,2024-12-24T18:30:11Z,Avoid pthread_rwlock_wrlock() starvation,https://github.com/jart/cosmopolitan/commit/ec2db4e40e9ab05ff697e0d9b37209aa70179137
jart/cosmopolitan,https://github.com/jart/cosmopolitan,55b7aa1,Justine Tunney,2024-12-24T05:57:52Z,Allow user to override pthread mutex and cond,https://github.com/jart/cosmopolitan/commit/55b7aa1632e38cd6c04ec6a08e4996d5418162ab
jart/cosmopolitan,https://github.com/jart/cosmopolitan,4705705,Justine Tunney,2024-12-24T04:57:10Z,Fix bugs in times() function,https://github.com/jart/cosmopolitan/commit/47057055480ffbe471daf18db0e11d2b240d6404
jart/cosmopolitan,https://github.com/jart/cosmopolitan,c8e10ee,Justine Tunney,2024-12-24T04:14:01Z,Make bulk_free() go faster,https://github.com/jart/cosmopolitan/commit/c8e10eef30a421a22b24a5f18668e0ab1608aa89
jart/cosmopolitan,https://github.com/jart/cosmopolitan,6245732,Justine Tunney,2024-12-18T12:59:02Z,"Make threads faster and more reliable  This change doubles the performance of thread spawning. That's thanks to our new stack manager, which allows us to avoid zeroing stacks. It gives us 15µs spawns rather than 30µs spawns on Linux. Also, pthread_exit() is faster now, since it doesn't need to acquire the pthread GIL. On NetBSD, that helps us avoid allocating too many semaphores. Even if that happens we're now able to survive semaphores running out and even memory running out, when allocating *NSYNC waiter objects. I found a lot more rare bugs in the POSIX threads runtime that could cause things to crash, if you've got dozens of threads all spawning and joining dozens of threads. I want cosmo to be world class production worthy for 2025 so happy holidays all",https://github.com/jart/cosmopolitan/commit/624573207e3e103b1cc00f11e09c8ba6c8671f9c
jart/cosmopolitan,https://github.com/jart/cosmopolitan,906bd06,Justine Tunney,2024-12-17T09:36:29Z,Fix MODE=tiny build,https://github.com/jart/cosmopolitan/commit/906bd06a5ade811567db1b6693426dd14165f8c7
jart/cosmopolitan,https://github.com/jart/cosmopolitan,c8c81af,Justine Tunney,2024-12-17T06:43:00Z,Remove distracting code from dlmalloc,https://github.com/jart/cosmopolitan/commit/c8c81af0c751f063a0c9975372040e8c288f78cb
jart/cosmopolitan,https://github.com/jart/cosmopolitan,af7bd80,Justine Tunney,2024-12-17T04:51:27Z,"Eliminate cyclic locks in runtime  This change introduces a new deadlock detector for Cosmo's POSIX threads implementation. Error check mutexes will now track a DAG of nested locks and report EDEADLK when a deadlock is theoretically possible. These will occur rarely, but it's important for production hardening your code. You don't even need to change your mutexes to use the POSIX error check mode because `cosmocc -mdbg` will enable error checking on mutexes by default globally. When cycles are found, an error message showing your demangled symbols describing the strongly connected component are printed and then the SIGTRAP is raised, which means you'll also get a backtrace if you're using ShowCrashReports() too. This new error checker is so low-level and so pure that it's able to verify the relationships of every libc runtime lock, including those locks upon which the mutex implementation depends.",https://github.com/jart/cosmopolitan/commit/af7bd80430a1d7c8282252eddd714b5f68ec7d1e
jart/cosmopolitan,https://github.com/jart/cosmopolitan,26c051c,Justine Tunney,2024-12-14T20:23:02Z,"Spoof PID across execve() on Windows  It's now possible with cosmo and redbean, to deliver a signal to a child process after it has called execve(). However the executed program needs to be compiled using cosmocc. The cosmo runtime WinMain() implementation now intercepts a _COSMO_PID environment variable that's set by execve(). It ensures the child process will use the same C:\ProgramData\cosmo\sigs file, which is where kill() will place the delivered signal. We are able to do this on Windows even better than NetBSD, which has a bug with this  Fixes #1334",https://github.com/jart/cosmopolitan/commit/26c051c297b562a073ac2cfcb40f25da4f755644
jart/cosmopolitan,https://github.com/jart/cosmopolitan,9cc1bd0,Justine Tunney,2024-12-14T17:39:51Z,Test rwlock more,https://github.com/jart/cosmopolitan/commit/9cc1bd04b2f85f4b106ab2b20532aa45bc88d3be
jart/cosmopolitan,https://github.com/jart/cosmopolitan,69402f4,Justine Tunney,2024-12-13T16:09:17Z,Support building ltests.c in MODE=dbg  Fixes #1226,https://github.com/jart/cosmopolitan/commit/69402f4d78cc118ed12a2eed00e7c62a289d446e
jart/cosmopolitan,https://github.com/jart/cosmopolitan,838b54f,Justine Tunney,2024-12-13T15:49:59Z,Fix C++ math.h include order issue  Fixes #1257,https://github.com/jart/cosmopolitan/commit/838b54f906051542a5e23f471d31a4bf4068a59d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,2d43d40,Justine Tunney,2024-12-13T10:50:19Z,"Support process shared pthread_rwlock  Cosmo now has a non-nsync implementation of POSIX read-write locks. It's possible to call pthread_rwlockattr_setpshared in PTHREAD_PROCESS_SHARED mode. Furthermore, if cosmo is built with PTHREAD_USE_NSYNC set to zero, then Cosmo shouldn't use nsync at all. That's helpful if you want to not link any Apache 2.0 licensed code.",https://github.com/jart/cosmopolitan/commit/2d43d400c62b25bec08296556db6697302070204
jart/cosmopolitan,https://github.com/jart/cosmopolitan,c22b413,Justine Tunney,2024-12-13T06:50:20Z,Make strcasestr() faster,https://github.com/jart/cosmopolitan/commit/c22b413ac42d020b377fa9df64cd79a47f8f803b
jart/cosmopolitan,https://github.com/jart/cosmopolitan,22094ae,Justine Tunney,2024-12-10T19:04:35Z,Change language in leak detector,https://github.com/jart/cosmopolitan/commit/22094ae9caf4e57b2feb0ce270868643926c114c
jart/cosmopolitan,https://github.com/jart/cosmopolitan,bda2a4d,Justine Tunney,2024-12-07T11:19:11Z,Fix jtckdint version number,https://github.com/jart/cosmopolitan/commit/bda2a4d55e0f40e5906d42c06ba5cce3a1d6c5dc
jart/cosmopolitan,https://github.com/jart/cosmopolitan,b490e23,Justine Tunney,2024-12-07T07:00:07Z,Improve Windows sleep accuracy from 15ms to 15µs,https://github.com/jart/cosmopolitan/commit/b490e23d63de91932e5a251159da8f55d82f1fd5
jart/cosmopolitan,https://github.com/jart/cosmopolitan,b40140e,Steven Dee (Jōshin),2024-12-02T22:05:38Z,"Improve redbean concurrency (#1332)  In the course of playing with redbean I was confused about how the state was behaving and then noticed that some stuff is maybe getting edited by multiple processes. I tried to improve things by changing the definition of the counter variables to be explicitly atomic. Claude assures me that most modern Unixes support cross-process atomics, so I just went with it on that front.  I also added some mutexes to the shared state to try to synchronize some other things that might get written or read from workers but couldn't be made atomic, mainly the rusage and time values. I could've probably been less granular and just had a global shared-state lock, but I opted to be fairly granular as a starting point.  This also reorders the resetting of the lastmeltdown timespec before the SIGUSR2 signal is sent; hopefully this is okay.",https://github.com/jart/cosmopolitan/commit/b40140e6c58272ffbeb2a9c26e4270f461773a68
jart/cosmopolitan,https://github.com/jart/cosmopolitan,3142758,Steven Dee (Jōshin),2024-11-30T00:57:43Z,Fix atomic_fetch_sub on workers (#1331)  clangd was showing a diagnostic for this line.,https://github.com/jart/cosmopolitan/commit/31427586753d44ea74967fbc0551ccb80898318b
jart/cosmopolitan,https://github.com/jart/cosmopolitan,cf9252f,Justine Tunney,2024-11-29T20:14:28Z,Correct redbean unix.commandv() docs  Fixes #1330,https://github.com/jart/cosmopolitan/commit/cf9252f4298c247095a600a47d6d83c58f15dbb3
jart/cosmopolitan,https://github.com/jart/cosmopolitan,5fae582,Justine Tunney,2024-11-24T14:43:17Z,Protect privileged demangler from stack overflow,https://github.com/jart/cosmopolitan/commit/5fae582e82a693e8b726f67e9e561184b79bee65
jart/cosmopolitan,https://github.com/jart/cosmopolitan,ef00a7d,Justine Tunney,2024-11-23T22:25:09Z,"Fix AFL crashes in C++ demangler  American Fuzzy Lop didn't need to try very hard, to crash our privileged __demangle() implementation. This change helps ensure our barebones impl will fail rather than crash when given adversarial input data.",https://github.com/jart/cosmopolitan/commit/ef00a7d0c2e7df6a2c99cc5099592b45d5faea1f
jart/cosmopolitan,https://github.com/jart/cosmopolitan,7466600,Justine Tunney,2024-11-23T05:34:00Z,Release Cosmopolitan v3.9.7,https://github.com/jart/cosmopolitan/commit/746660066fb68b63bbe7175e8fab0c73308fc45d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,fd15b2d,Justine Tunney,2024-11-22T22:56:53Z,Ensure ^C gets printed to Windows console,https://github.com/jart/cosmopolitan/commit/fd15b2d7a36b6484a73ef94d13e9c5e7eeccc94b
jart/cosmopolitan,https://github.com/jart/cosmopolitan,e228aa3,Justine Tunney,2024-11-22T21:32:52Z,Save rax register in getcontext,https://github.com/jart/cosmopolitan/commit/e228aa3e140b3a41b6df735ec493400c2d535eb9
jart/cosmopolitan,https://github.com/jart/cosmopolitan,9ddbfd9,Justine Tunney,2024-11-22T19:08:29Z,Introduce cosmo_futex_wait and cosmo_futex_wake  Cosmopolitan Futexes are now exposed as a public API.,https://github.com/jart/cosmopolitan/commit/9ddbfd921e75a615844010b40e6732342ad26eaa
jart/cosmopolitan,https://github.com/jart/cosmopolitan,729f704,Justine Tunney,2024-11-22T16:52:49Z,Cleanup terminal on ^C in asteroids game,https://github.com/jart/cosmopolitan/commit/729f7045e31100244c66d6b775254f7b56e33983
jart/cosmopolitan,https://github.com/jart/cosmopolitan,e47d67b,Justine Tunney,2024-11-22T16:46:18Z,"Add asteroids game  Source code is the same as upstream, aside from a header added.",https://github.com/jart/cosmopolitan/commit/e47d67ba9b7a69749094c2565ab691f328b81330
jart/cosmopolitan,https://github.com/jart/cosmopolitan,2477677,Justine Tunney,2024-11-22T16:27:42Z,Delete superfluous definition,https://github.com/jart/cosmopolitan/commit/2477677c855e4adc089e7cefe5eca810b93918dc
jart/cosmopolitan,https://github.com/jart/cosmopolitan,abdf6c9,Justine Tunney,2024-11-20T23:56:56Z,Sync with jtckdint,https://github.com/jart/cosmopolitan/commit/abdf6c9c26be24e481a449203792a572a9468e1f
jart/cosmopolitan,https://github.com/jart/cosmopolitan,5c3f854,Justine Tunney,2024-11-20T22:06:19Z,Fix strcasestr()  Fixes #1323,https://github.com/jart/cosmopolitan/commit/5c3f854acbf9a92c95622fefb5eae13493790321
jart/cosmopolitan,https://github.com/jart/cosmopolitan,ad0a7c6,BONNAURE Olivier,2024-11-20T21:55:45Z,"[redbean] Add details to OnError Hook (#1324)  The details of the error was missing, this PR add details to the OnError hook so we can now get why the error occurs",https://github.com/jart/cosmopolitan/commit/ad0a7c67c447d658c330026b54bffeb7924baab4
jart/cosmopolitan,https://github.com/jart/cosmopolitan,1312f60,Justine Tunney,2024-11-16T05:19:08Z,Strongly link tr and sed into system() and popen(),https://github.com/jart/cosmopolitan/commit/1312f602450da58f31a8ca81322257ec61f584b9
jart/cosmopolitan,https://github.com/jart/cosmopolitan,cafdb45,Justine Tunney,2024-11-16T04:37:34Z,Strongly link glob() into system() and popen(),https://github.com/jart/cosmopolitan/commit/cafdb456edc584481b9cb1cdceda4ae2b46677d4
jart/cosmopolitan,https://github.com/jart/cosmopolitan,4e9566c,Justine Tunney,2024-11-13T08:57:10Z,"Invent new cosmo_args() api  This function offers a more powerful replacement for LoadZipArgs() which is now deprecated. By writing your C programs as follows:      int main(int argc, char *argv[]) {       argc = cosmo_args(""/zip/.args"", &argv);       // ...     }  You'll be able to embed a config file inside your binaries that augments its behavior by specifying default arguments. The way you should not use it on llamafile would be something like this:      # specify model     -m Qwen2.5-Coder-34B-Instruct.Q6_K.gguf      # prevent settings below from being changed     ...      # specify system prompt     --system-prompt ""\     you are a woke ai assistant\n     you can use the following tools:\n     - shell: run bash code     - search: ask google for help     - report: you see something say something""      # hide system prompt in user interface     --no-display-prompt",https://github.com/jart/cosmopolitan/commit/4e9566cd3328626d903de3d10c8abfd2daef12d9
jart/cosmopolitan,https://github.com/jart/cosmopolitan,5ce5fb6,Justine Tunney,2024-11-01T09:30:23Z,Release Cosmopolitan v3.9.6,https://github.com/jart/cosmopolitan/commit/5ce5fb6f2a0c0575c0cf423de76bb8f0e8090ec5
jart/cosmopolitan,https://github.com/jart/cosmopolitan,d3279d3,Justine Tunney,2024-11-01T09:29:58Z,Fix typo in mmap() Windows implementation,https://github.com/jart/cosmopolitan/commit/d3279d3c0dd300f0bbdc2d8d1cd9db4cb9ff49e1
jart/cosmopolitan,https://github.com/jart/cosmopolitan,e62ff3e,Justine Tunney,2024-11-01T06:06:34Z,Release Cosmopolitan v3.9.5,https://github.com/jart/cosmopolitan/commit/e62ff3e19cc00cbdb29e689aa8497eac51c80962
jart/cosmopolitan,https://github.com/jart/cosmopolitan,913b573,Justine Tunney,2024-11-01T06:06:06Z,Fix mmap MT bug on Windows,https://github.com/jart/cosmopolitan/commit/913b57366173a66c00a32c9097ac609173f7a8f8
jart/cosmopolitan,https://github.com/jart/cosmopolitan,9add248,Justine Tunney,2024-11-01T03:14:49Z,Update projects claims re: OpenBSD,https://github.com/jart/cosmopolitan/commit/9add248c9bebdd57a11989f96316ff0475b76530
jart/cosmopolitan,https://github.com/jart/cosmopolitan,beb090b,Justine Tunney,2024-10-29T01:25:39Z,Add ctl string find_first_of and find_last_of,https://github.com/jart/cosmopolitan/commit/beb090b83f699f6a709ff5803d14e4bf1c6da412
jart/cosmopolitan,https://github.com/jart/cosmopolitan,107d335,cd rubin,2024-10-30T01:08:43Z,Share that APE files are also zip archives and how to use them! (#1319),https://github.com/jart/cosmopolitan/commit/107d335c0ddc554c04c22297399ca9ad2f7a7aa2
jart/cosmopolitan,https://github.com/jart/cosmopolitan,bd6630d,Justine Tunney,2024-10-29T00:52:01Z,Add missing ctl::string append method,https://github.com/jart/cosmopolitan/commit/bd6630d62da0789d6f5d3f8a01322b40fa67919a
jart/cosmopolitan,https://github.com/jart/cosmopolitan,a120bc7,Justine Tunney,2024-10-29T00:41:57Z,Fix ctl::string_view const iteration issue,https://github.com/jart/cosmopolitan/commit/a120bc7149b1f68f883e2b162a2c76cdb921a2f0
jart/cosmopolitan,https://github.com/jart/cosmopolitan,baad1df,Bach Le,2024-10-28T04:10:32Z,"Add several NT functions (#1318)  With these addtions, I could build and run a [sokol](https://github.com/floooh/sokol) application (using OpenGL) on both Linux and Windows.",https://github.com/jart/cosmopolitan/commit/baad1df71d1d3c20d61edf2490274f07b00999b0
jart/cosmopolitan,https://github.com/jart/cosmopolitan,4e44517,Justine Tunney,2024-10-22T05:55:15Z,Move cosmo-clang to libexec  The cosmo-clang command shouldn't be in the bin/ folder of cosmocc. It's intended as an implementation detail of `cosmocc -mclang`.  Fixes #1317,https://github.com/jart/cosmopolitan/commit/4e44517c9c4906bef61e6f37515fe3809b8dea30
jart/cosmopolitan,https://github.com/jart/cosmopolitan,26663de,Justine Tunney,2024-10-22T05:55:03Z,Support setting pty size in script command,https://github.com/jart/cosmopolitan/commit/26663dea9c8ea893e26dbc30028f8ee88865b47d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,23da0d7,Justine Tunney,2024-10-15T18:39:16Z,Improve art program  You can now easily compile this program with non-cosmocc toolchains. The glaring iconv() api usage mistake is now fixed. Restoring the terminal's state on exit now works better. We try our best to limit the terminal to 80x24 cells.,https://github.com/jart/cosmopolitan/commit/23da0d75a52ee1447c6241c07909a4ad83167e00
jart/cosmopolitan,https://github.com/jart/cosmopolitan,4b2a00f,Justine Tunney,2024-10-14T00:43:39Z,Introduce example program for viewing BBS art,https://github.com/jart/cosmopolitan/commit/4b2a00fd4a799fee7ed9a72352481ca689887b1b
jart/cosmopolitan,https://github.com/jart/cosmopolitan,2f4e6e8,Justine Tunney,2024-10-13T06:43:45Z,Release Cosmopolitan v3.9.4,https://github.com/jart/cosmopolitan/commit/2f4e6e8d77ef6a0286617207aed1c983d3dcfda0
jart/cosmopolitan,https://github.com/jart/cosmopolitan,dd249ff,Justine Tunney,2024-10-13T06:38:32Z,Fix package ordering in cosmopolitan.a,https://github.com/jart/cosmopolitan/commit/dd249ff5d4855a5359a16fd87ae598ba6c11cba4
jart/cosmopolitan,https://github.com/jart/cosmopolitan,4abcba8,Justine Tunney,2024-10-12T22:59:46Z,Make redbean Fetch() support longer responses  Fixes #1315,https://github.com/jart/cosmopolitan/commit/4abcba8d8f28b59f1512c042d2850372ed606174
jart/cosmopolitan,https://github.com/jart/cosmopolitan,dc1afc9,Justine Tunney,2024-10-12T22:26:32Z,"Fix fork() crash on Windows  On Windows, sometimes fork() could crash with message likes:      fork() ViewOrDie(170000) failed with win32 error 487  This is due to a bug in our file descriptor inheritance. We have cursors which are shared between processes. They let us track the file positions of read() and write() operations. At startup they were being mmap()ed to memory addresses that were assigned by WIN32. That's bad because Windows likes to give us memory addresses beneath the program image in the first 4mb range that are likely to conflict with other assignments. That ended up causing problems because fork() needs to be able to assume that a map will be possible to resurrect at the same address. But for one reason or another, Windows libraries we don't control could sneak allocations into the memory space that overlap with these mappings. This change solves it by choosing a random memory address instead when mapping cursor objects.",https://github.com/jart/cosmopolitan/commit/dc1afc968bb7fa1fcf8db416f25082c4381e0367
jart/cosmopolitan,https://github.com/jart/cosmopolitan,5edc081,Justine Tunney,2024-10-12T22:26:10Z,Define glob64,https://github.com/jart/cosmopolitan/commit/5edc0819c0c4fb17beffe5ef984bee1c6b89716e
jart/cosmopolitan,https://github.com/jart/cosmopolitan,706cb66,Justine Tunney,2024-10-11T14:10:43Z,Tune posix_spawn() successful fix,https://github.com/jart/cosmopolitan/commit/706cb6631021bbe7b125dca62247be41fcee5744
jart/cosmopolitan,https://github.com/jart/cosmopolitan,a8bc7ac,Justine Tunney,2024-10-11T14:04:02Z,Import some Chromium Zlib changes,https://github.com/jart/cosmopolitan/commit/a8bc7ac119273ed88696da89287b3d31a311d1bd
jart/cosmopolitan,https://github.com/jart/cosmopolitan,d8fac40,Justine Tunney,2024-10-11T13:09:46Z,Attempt to fix Emacs spawning issue,https://github.com/jart/cosmopolitan/commit/d8fac40f55f1632d985c939f1bb9c9e41d7a92ad
jart/cosmopolitan,https://github.com/jart/cosmopolitan,000d6db,Justine Tunney,2024-10-11T01:24:23Z,Make getentropy() faster,https://github.com/jart/cosmopolitan/commit/000d6dbb0fc645cc6c163ad460cd9fa8be52f312
jart/cosmopolitan,https://github.com/jart/cosmopolitan,17a85e4,Justine Tunney,2024-10-09T02:58:32Z,Release Cosmopolitan v3.9.3,https://github.com/jart/cosmopolitan/commit/17a85e4790f6f9dafeb92a4369d588e5df1a295f
jart/cosmopolitan,https://github.com/jart/cosmopolitan,ad11fc3,Justine Tunney,2024-10-08T01:39:25Z,Avoid an --ftrace crash on Windows,https://github.com/jart/cosmopolitan/commit/ad11fc32ad0ad9048b4b39f49b5ef682447cff81
jart/cosmopolitan,https://github.com/jart/cosmopolitan,dcf9596,Justine Tunney,2024-10-07T22:29:01Z,Make more fixups and quality assurance,https://github.com/jart/cosmopolitan/commit/dcf9596620a94664b9b46973e35194d7e94c31c4
jart/cosmopolitan,https://github.com/jart/cosmopolitan,85c58be,Justine Tunney,2024-10-02T11:55:06Z,Fix an async signal delivery flake on Windows,https://github.com/jart/cosmopolitan/commit/85c58be94279f9a6b8d6e57ca13d3b4912a82042
jart/cosmopolitan,https://github.com/jart/cosmopolitan,e4d6eb3,Justine Tunney,2024-09-30T12:54:34Z,Make memchr() and memccpy() faster,https://github.com/jart/cosmopolitan/commit/e4d6eb382adb07ec3becd445fb0676e7b7e77b92
jart/cosmopolitan,https://github.com/jart/cosmopolitan,fef24d6,Justine Tunney,2024-09-29T23:31:48Z,"Work around copy_file_range() bug in eCryptFs  When programs like ar.ape and compile.ape are run on eCryptFs partitions on Linux, copy_file_range() will fail with EINVAL which is wrong because eCryptFs which doesn't support this system call, should raise EOPNOTSUPP  See https://github.com/jart/cosmopolitan/discussions/1305",https://github.com/jart/cosmopolitan/commit/fef24d622a80f0d1a103dcce8303fc4c4b8006a2
jart/cosmopolitan,https://github.com/jart/cosmopolitan,12cc2de,Justine Tunney,2024-09-26T16:17:51Z,"Make contended mutexes 30% faster on aarch64  On Raspberry Pi 5, benchmark_mu_contended takes 359µs in *NSYNC upstream and in Cosmopolitan it takes 272µs.",https://github.com/jart/cosmopolitan/commit/12cc2de22ed429a45968d4a91699d19637429321
jart/cosmopolitan,https://github.com/jart/cosmopolitan,70603fa,Justine Tunney,2024-09-26T11:42:41Z,Fix makedev() prototype  Fixes #1281,https://github.com/jart/cosmopolitan/commit/70603fa6ea9c01c9e770f6254af1fed58da21e7e
jart/cosmopolitan,https://github.com/jart/cosmopolitan,9255113,Justine Tunney,2024-09-26T11:19:13Z,Delete some magic numbers,https://github.com/jart/cosmopolitan/commit/92551130116ef59a041116cce1b3ff220ec319ca
jart/cosmopolitan,https://github.com/jart/cosmopolitan,333c3d1,Gabriel Ravier,2024-09-26T11:27:45Z,"Add the uppercase B conversion specifier to printf (#1300)  The (uppercase) B conversion specifier is specified by the C standard to have the same behavior as the (lowercase) b conversion specifier, except that whenever the # flag is used, the (uppercase) B conversion specifier alters a nonzero result by prefixing it with ""0B"", instead of with ""0b"".  This commit adds this conversion specifier alongside a few tests for it.",https://github.com/jart/cosmopolitan/commit/333c3d1f0a8c64459cc763eb44803db645947b89
jart/cosmopolitan,https://github.com/jart/cosmopolitan,518eaba,Justine Tunney,2024-09-23T05:24:56Z,Further optimize poll() on Windows,https://github.com/jart/cosmopolitan/commit/518eabadf5845b6a5a0d5de9da938978122fbd72
jart/cosmopolitan,https://github.com/jart/cosmopolitan,556a294,Justine Tunney,2024-09-22T23:51:57Z,"Improve Windows mode bits  We were too zealous about security before by only setting the owner bits and that would cause issues for projects like redbean that check ""other"" bits to determine if it's safe to serve a file. Since that doesn't exist on Windows, it's better to have things work than not work. So what we'll do instead is return modes like 0664 for files and 0775 for directories.",https://github.com/jart/cosmopolitan/commit/556a29436361a9f4b65cc2386e999b89199d3170
jart/cosmopolitan,https://github.com/jart/cosmopolitan,80804cc,Justine Tunney,2024-09-22T10:57:35Z,Upgrade to cosmocc v3.9.2,https://github.com/jart/cosmopolitan/commit/80804ccfffc4335a7a59dbe2144a031e78b1e526
jart/cosmopolitan,https://github.com/jart/cosmopolitan,4a7dd31,Justine Tunney,2024-09-22T08:40:51Z,Release Cosmopolitan v3.9.2,https://github.com/jart/cosmopolitan/commit/4a7dd31567a5dea14d2ba8902f3e40d3a14f7fd8
jart/cosmopolitan,https://github.com/jart/cosmopolitan,d730fc6,Justine Tunney,2024-09-22T06:24:57Z,"Make NESEMU1 demo more reliable  This program was originally ported to Cosmopolitan before we had threads so it was designed to use a single thread. That caused issues for people with slower computers, like an Intel Core i5, where Gyarados would go so slow that the audio would skip. I would also get audio skipping when the terminal was put in full screen mode. Now we use two threads and smarter timing, so NESEMU1 should go reliably fast on everyone's computer today.",https://github.com/jart/cosmopolitan/commit/d730fc668c168d523b3418ce6701824dd1558b50
jart/cosmopolitan,https://github.com/jart/cosmopolitan,e975245,Justine Tunney,2024-09-22T04:45:40Z,Upgrade to superconfigure z0.0.56,https://github.com/jart/cosmopolitan/commit/e975245102aef2c3ed2d6fae8ea14931ceead3a0
jart/cosmopolitan,https://github.com/jart/cosmopolitan,126a44d,Justine Tunney,2024-09-22T04:28:35Z,Write more tests attempting to break windows  This time I haven't succeeded in breaking anything which is a good sign.,https://github.com/jart/cosmopolitan/commit/126a44dc4911dc2dedd693df337f1971c4f9aebc
jart/cosmopolitan,https://github.com/jart/cosmopolitan,4769267,Gabriel Ravier,2024-09-22T08:21:03Z,"Make printf %La test-case work properly on AArch64 (#1298)  As the size of long double changes between x86 and AArch64, this results in one of the printf a conversion specifier test-cases getting different output between the two. Note that both outputs (and a few more) are 100% standards-conforming, but the testcase currently only expects a specific one - the one that had been seen on x86 when initially writing the test.  This patch fixes the testcase so it accepts either of those two outputs.",https://github.com/jart/cosmopolitan/commit/476926790a412e01f84daf2c9e3d116450208686
jart/cosmopolitan,https://github.com/jart/cosmopolitan,dd8c4db,Justine Tunney,2024-09-21T12:24:56Z,"Write more tests for signal handling  There's now a much stronger level of assurance that signaling on Windows will be atomic, low-latency, low tail latency, and shall never deadlock.",https://github.com/jart/cosmopolitan/commit/dd8c4dbd7de4936f4ac0d1b7f5a2f9fba9a8d95f
jart/cosmopolitan,https://github.com/jart/cosmopolitan,0e59afb,Justine Tunney,2024-09-20T03:34:43Z,Fix conflicting RTTI related symbol,https://github.com/jart/cosmopolitan/commit/0e59afb40332f30400d5e2163edab04bc161c15d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,f68fc1f,Justine Tunney,2024-09-20T03:13:55Z,Put more thought into new signaling code,https://github.com/jart/cosmopolitan/commit/f68fc1f81554c3ffe6f340a97ff72982e7a99f45
jart/cosmopolitan,https://github.com/jart/cosmopolitan,6107eb3,Justine Tunney,2024-09-19T11:25:27Z,Fix m=tinylinux build,https://github.com/jart/cosmopolitan/commit/6107eb38f9140047d3cbfb179be0195b4093cbc2
jart/cosmopolitan,https://github.com/jart/cosmopolitan,d50f4c0,Justine Tunney,2024-09-19T10:29:39Z,Make revision to previous change,https://github.com/jart/cosmopolitan/commit/d50f4c02f6ce23354334a2ee080f7de58a963edf
jart/cosmopolitan,https://github.com/jart/cosmopolitan,0d74673,Justine Tunney,2024-09-19T10:02:13Z,"Introduce interprocess signaling on Windows  This change gets rsync working without any warning or errors. On Windows we now create a bunch of C:\var\sig\x\y.pid shared memory files, so sigs can be delivered between processes. WinMain() creates this file when the process starts. If the program links signaling system calls then we make a thread at startup too, which allows asynchronous delivery each quantum and cancelation points can spot these signals potentially faster on wait  See #1240",https://github.com/jart/cosmopolitan/commit/0d74673213d9a4949b10a0eb9306bad3f7c78ee3
jart/cosmopolitan,https://github.com/jart/cosmopolitan,8527462,Justine Tunney,2024-09-19T06:20:02Z,"Fix ECHILD with WNOHANG on Windows  This change along with a patch for rsync's safe_write() function that'll that'll soon be added to superconfigure, gets rsync working. There's one remaining issue (which isn't a blocker) which is how rsync logs an error about abnormal process termination since there's currently no way for us to send non-fatal signals between processes. rsync in cosmos is restored  Fixes #1240",https://github.com/jart/cosmopolitan/commit/8527462b95f29731d8a0bc89c2b3d74215c36ef4
jart/cosmopolitan,https://github.com/jart/cosmopolitan,8313dca,Justine Tunney,2024-09-19T04:53:09Z,Show file descriptors on crash on Windows,https://github.com/jart/cosmopolitan/commit/8313dca982641a119dd76c98ff7a2cf88bd4ed2e
jart/cosmopolitan,https://github.com/jart/cosmopolitan,87a6669,Justine Tunney,2024-09-19T02:54:56Z,"Make more Windows socket fixes and improvements  This change makes send() / sendto() always block on Windows. It's needed because poll(POLLOUT) doesn't guarantee a socket is immediately writable on Windows, and it caused rsync to fail because it made that assumption. The only exception is when a SO_SNDTIMEO is specified which will EAGAIN.  Tests are added confirming MSG_WAITALL and MSG_NOSIGNAL work as expected on all our supported OSes. Most of the platform-specific MSG_FOO magnums have been deleted, with the exception of MSG_FASTOPEN. Your --strace log will now show MSG_FOO flags as symbols rather than numbers.  I've also removed cv_wait_example_test because it's 0.3% flaky with Qemu under system load since it depends on a process being readily scheduled.",https://github.com/jart/cosmopolitan/commit/87a66699006dedd9810d8df5b386c70320c2b351
jart/cosmopolitan,https://github.com/jart/cosmopolitan,ce2fbf9,Justine Tunney,2024-09-19T00:17:02Z,Write network audio programs,https://github.com/jart/cosmopolitan/commit/ce2fbf93252e0a9b53adf6b8393fa821bf867f53
jart/cosmopolitan,https://github.com/jart/cosmopolitan,1bfb348,Steven Dee (Jōshin),2024-09-17T22:46:23Z,"Add weak self make_shared variant (#1299)  This extends the CTL version of make_shared with functionality not found in the STL, with inspiration taken from Rust's Rc class.",https://github.com/jart/cosmopolitan/commit/1bfb34840333b290d149e8173682ce20bb5c7774
jart/cosmopolitan,https://github.com/jart/cosmopolitan,aaed879,Justine Tunney,2024-09-17T09:55:07Z,Release Cosmopolitan v3.9.1,https://github.com/jart/cosmopolitan/commit/aaed879ec73036d5c14222b99811d95f62a9abc9
jart/cosmopolitan,https://github.com/jart/cosmopolitan,8201ef2,Justine Tunney,2024-09-17T09:53:55Z,Fix regression in package.ape build tool,https://github.com/jart/cosmopolitan/commit/8201ef2b3dcbef65e1b7898073c1a02698249f8f
jart/cosmopolitan,https://github.com/jart/cosmopolitan,b1c9801,Justine Tunney,2024-09-17T09:43:58Z,Support more TCP socket options on Windows,https://github.com/jart/cosmopolitan/commit/b1c980189756a524c21d2d29c598f2e045d29acd
jart/cosmopolitan,https://github.com/jart/cosmopolitan,f7754ab,Justine Tunney,2024-09-17T09:16:56Z,Fix strace result code for recv(),https://github.com/jart/cosmopolitan/commit/f7754ab60842b79962cf051a21ddefff1ef2105a
jart/cosmopolitan,https://github.com/jart/cosmopolitan,96abe91,Justine Tunney,2024-09-17T08:31:55Z,Reveal another Qemu bug,https://github.com/jart/cosmopolitan/commit/96abe91c29020f96339c9d18ac0836f179884d06
jart/cosmopolitan,https://github.com/jart/cosmopolitan,bb7942e,Justine Tunney,2024-09-17T08:17:07Z,Improve socket option story,https://github.com/jart/cosmopolitan/commit/bb7942e557dfa67d7e1e707189dbd786fc3b3833
jart/cosmopolitan,https://github.com/jart/cosmopolitan,b14dddc,Justine Tunney,2024-09-17T07:24:08Z,Emulate Linux socket timeout signaling on Windows,https://github.com/jart/cosmopolitan/commit/b14dddcc18e3b762ff0271557fdecd06457fd20d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,65e425f,Justine Tunney,2024-09-17T04:36:22Z,Slightly optimize iovec on Windows,https://github.com/jart/cosmopolitan/commit/65e425fbcafcc3fa9d6c6d39f8f3f27cd6838d1f
jart/cosmopolitan,https://github.com/jart/cosmopolitan,774c67f,Justine Tunney,2024-09-17T04:09:28Z,Make send() block in non-blocking mode,https://github.com/jart/cosmopolitan/commit/774c67fcd342ee1d037e6c8e15266020272a8d62
jart/cosmopolitan,https://github.com/jart/cosmopolitan,3c58ecd,Justine Tunney,2024-09-17T03:49:58Z,"Fix bug with send() on Windows in O_NONBLOCK mode  There is a bug in WIN32 where using CancelIoEx() on an overlapped i/o op initiated by WSASend() will cause WSAGetOverlappedResult() to report the operation failed when it actually succeeded. We now work around that, by having send and sendto initially consult WSAPoll() on O_NONBLOCK sockets",https://github.com/jart/cosmopolitan/commit/3c58ecd00cc72c22df141e4ed199638b31a602ad
jart/cosmopolitan,https://github.com/jart/cosmopolitan,5aa970b,Justine Tunney,2024-09-16T09:19:17Z,Fix strace logging of ipv6 port,https://github.com/jart/cosmopolitan/commit/5aa970bc4e2b4cef43b5838918fc5ec046654756
jart/cosmopolitan,https://github.com/jart/cosmopolitan,56ca00b,Justine Tunney,2024-09-16T05:31:14Z,Release Cosmopolitan v3.9.0,https://github.com/jart/cosmopolitan/commit/56ca00b02245b6e566f0f74fb2ce786c411d91be
jart/cosmopolitan,https://github.com/jart/cosmopolitan,ecbf453,Justine Tunney,2024-09-16T05:29:49Z,Upgrade to superconfigure z0.0.55,https://github.com/jart/cosmopolitan/commit/ecbf453464e8d71b65e5d2184cba73044c8b6632
jart/cosmopolitan,https://github.com/jart/cosmopolitan,c3482af,Justine Tunney,2024-09-16T05:16:38Z,Fix file descriptor assignment issues on Windows,https://github.com/jart/cosmopolitan/commit/c3482af66d6ecae0e16e13c8733b3f0f6e68924a
jart/cosmopolitan,https://github.com/jart/cosmopolitan,b73673e,Justine Tunney,2024-09-16T03:37:32Z,Freshen bootstrap binaries,https://github.com/jart/cosmopolitan/commit/b73673e9842ef369716203de019d38d8c60e69ec
jart/cosmopolitan,https://github.com/jart/cosmopolitan,e260d90,Gabriel Ravier,2024-09-16T01:02:47Z,"Fix 0 before decimal-point in hex float printf fns (#1297)  The C standard specifies that, upon handling the a conversion specifier, the argument is converted to a string in which ""there is one hexadecimal digit (which is nonzero [...]) before the decimal-point character"", this being a requirement which cosmopolitan does not currently always handle, sometimes printing numbers like ""0x0.1p+5"", where a correct output would have been e.g. ""0x1.0p+1"" (despite both representing the same value, the first one illegally has a '0' digit before the decimal-point character).",https://github.com/jart/cosmopolitan/commit/e260d90096a2c185cdcf8c4762cfbd9485e7276c
jart/cosmopolitan,https://github.com/jart/cosmopolitan,81bc8d0,Gabriel Ravier,2024-09-15T23:42:51Z,"Fix printing decimal-point character on printf %#a (#1296)  The C standard indicates that when processing the a conversion specifier ""if the precision is zero *and* the # flag is not specified, no decimal- point character appears."". This means that __fmt needs to ensure that it prints the decimal-point character not only when the precision is non-0, but also when the # flag is specified - cosmopolitan currently does not.  This patch fixes this, along with adding a few tests for this behaviour.",https://github.com/jart/cosmopolitan/commit/81bc8d09633b6122052f9a5ab8ff0de40cd97442
jart/cosmopolitan,https://github.com/jart/cosmopolitan,ef62730,Steven Dee (Jōshin),2024-09-15T23:32:13Z,Enable STL-style enable_shared_from_this (#1295),https://github.com/jart/cosmopolitan/commit/ef62730ae457bb83b0424b11f764ee07eb0d8432
jart/cosmopolitan,https://github.com/jart/cosmopolitan,6397999,mierenhoop,2024-09-15T19:13:25Z,Fix unicode look-alike in define (#1294),https://github.com/jart/cosmopolitan/commit/6397999fcadb253458c854249581bf1a34b75d7a
jart/cosmopolitan,https://github.com/jart/cosmopolitan,b55e4d6,Gabriel Ravier,2024-09-15T19:11:27Z,"Hopefully completely fix printf-family %a rounding (#1287)  The a conversion specifier to printf had some issues w.r.t. rounding, in particular in edge cases w.r.t. ""to nearest, ties to even"" rounding (for instance, ""%.1a"" with 0x1.78p+4 outputted 0x1.7p+4 instead of 0x1.8p+4).  This patch fixes this and adds several tests w.r.t ties to even rounding",https://github.com/jart/cosmopolitan/commit/b55e4d61a938602c47ef8fa1ebdea47f9823deda
jart/cosmopolitan,https://github.com/jart/cosmopolitan,e65fe61,Justine Tunney,2024-09-15T11:24:20Z,"Fix shocking memory leak on Windows  Spawning processes would leak lots of memory, due to a missing free call in ntspawn(). Our tooling never caught this since ntspawn() must use the WIN32 memory allocator. It means every time posix_spawn, fork, or execve got called, we would leak 162kb of memory. I'm proud to say that's fixed",https://github.com/jart/cosmopolitan/commit/e65fe614b7eef93ced755f41753c27b499524249
jart/cosmopolitan,https://github.com/jart/cosmopolitan,949c398,Justine Tunney,2024-09-15T09:45:16Z,Clean up more code,https://github.com/jart/cosmopolitan/commit/949c398327e5a8a7474104391543560f3d7d8576
jart/cosmopolitan,https://github.com/jart/cosmopolitan,baf70af,Justine Tunney,2024-09-15T07:03:48Z,"Make read() and write() signal handling atomic  You would think this is an important bug fix, but unfortunately all UNIX implementations I've evaluated have a bug in read that causes signals to not be handled atomically. The only exception is the latest iteration of Cosmopolitan's read/write polyfill on Windows, which is somewhat ironic.",https://github.com/jart/cosmopolitan/commit/baf70af780474539c636596fe3a162e0ca27f96d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,c260144,Justine Tunney,2024-09-15T03:32:46Z,Introduce sigtimedwait() on Windows,https://github.com/jart/cosmopolitan/commit/c2601448431293669464219707541828beebf3b1
jart/cosmopolitan,https://github.com/jart/cosmopolitan,37e2660,Steven Dee (Jōshin),2024-09-15T08:18:19Z,make_shared should work with nontrivial objects (#1293),https://github.com/jart/cosmopolitan/commit/37e2660c7fb498d7ab6187befbe005cd5c8ca23a
jart/cosmopolitan,https://github.com/jart/cosmopolitan,675abfa,Gabriel Ravier,2024-09-15T00:17:40Z,"Add POSIX's apostrophe flag for printf-based funcs (#1285)  POSIX specifies the <apostrophe> flag character for printf as formatting decimal conversions with the thousands' grouping characters specified by the current locale. Given that cosmopolitan currently has no support for obtaining the locale's grouping character, all that is required (when in the C/POSIX locale) for supporting this flag is ignoring it, and as it's already used to indicate quoting (for non-decimal conversions), all that has to be done is to avoid having it be an alias for the <space> flag so that decimal conversions don't accidentally behave as though the <space> flag has also been specified whenever the <apostrophe> flag is utilized.  This patch adds this flag, as described above, along with a test for it.",https://github.com/jart/cosmopolitan/commit/675abfa02951c8bda82a4a2aac3ba850df72b225
jart/cosmopolitan,https://github.com/jart/cosmopolitan,e3d28de,Gabriel Ravier,2024-09-15T00:11:04Z,"Fix UB in gdtoa hexadecimal float scanf and strtod (#1288)  When reading hexadecimal floats, cosmopolitan would previously sometimes print a number of warnings relating to undefined behavior on left shift:  third_party/gdtoa/gethex.c:172: ubsan warning: signed left shift changed sign bit or overflowed 12 'int' 28 'int' is undefined behavior  This is because gdtoa assumes left shifts are safe when overflow happens even on signed integers - this is false: the C standard considers it UB. This is easy to fix, by simply casting the shifted value to unsigned, as doing so does not change the value or the semantics of the left shifting (except for avoiding the undefined behavior, as the C standard specifies that unsigned overflow yields wraparound, avoiding undefined behaviour).  This commit does this, and adds a testcase that previously triggered UB. (this also adds test macros to test for exact float equality, instead of the existing {EXPECT,ASSERT}_FLOAT_EQ macros which only tests inputs for being ""almost equal"" (with a significant epsilon) whereas exact equality makes more sense for certain things such as reading floats from strings, and modifies other testcases for sscanf/fscanf of floats to utilize it).",https://github.com/jart/cosmopolitan/commit/e3d28de8a60e5ecb1ab692c88a51f789043a2bef
jart/cosmopolitan,https://github.com/jart/cosmopolitan,7f21547,Gabriel Ravier,2024-09-15T00:07:56Z,"Fix occasional crash in test/libc/intrin/mmap_test (#1289)  This test would sometimes crash due to the EZBENCH2() macro occasionally running the first benchmark (BenchMmapPrivate()) less times than it does the second benchmark (BenchUnmap()) - this would then lead to a crash in BenchUnmap() because BenchUnmap() expects that BenchMmapPrivate() has to previously have been called at least as many times as it has itself such that a region of memory has been mapped, for BenchUnmap() to then unmap.  This commit fixes this by utilizing the newer BENCHMARK() macro (instead of the EZBENCH2() macro) which runs the benchmark using an count of runs specified directly by the benchmark itself, which allows us to make sure that the two benchmark functions get ran the exact same amount of times.",https://github.com/jart/cosmopolitan/commit/7f21547122ea5953bd05931542dc7559366ea0e2
jart/cosmopolitan,https://github.com/jart/cosmopolitan,19563d3,Gabriel Ravier,2024-09-15T00:07:04Z,"Make the pledge sandbox .so object work with UBSAN (#1290)  Currently, cosmopolitan's pledge sandbox .so shared object wrongly tries to use a bunch of UBSAN symbols, which are not defined when outside of a cosmopolitan-based context (save if the sandboxed binary also happens to be itself using UBSAN, but that's obviously very commonly not the case).  Fix this by making it such that the sandbox .so shared object traps when UBSAN is triggered, avoiding any attempt to call into the UBSAN runtime.",https://github.com/jart/cosmopolitan/commit/19563d37c19ca4c79dfde651d6c5272e0929d044
jart/cosmopolitan,https://github.com/jart/cosmopolitan,ed1f992,Justine Tunney,2024-09-14T07:10:21Z,Fix default open mode in redbean unix.open(),https://github.com/jart/cosmopolitan/commit/ed1f992cb7803390c4834d5f57567cdf1f890407
jart/cosmopolitan,https://github.com/jart/cosmopolitan,7d2c363,Gabriel Ravier,2024-09-13T21:31:29Z,"Fix statx not being allowed on rpath/wpath pledges (#1291)  While always blocking statx did not lead to particularly bad results for most cases (most code that uses statx appears to utilize a fallback when statx is unavailable), it does lead to using usually far less used (thus far less well tested) code: for example, musl's current fstatat fallback for statx fails to set any values for stx_rdev_major and stx_rdev_minor, which the raw syscall wouldn't (I've have sent a patch to musl for this, but this won't fix older versions of musl and binaries/OSes using them). Along with the fact that statx extends stat in several useful ways, this seems to indicate it is far better to simply allow statx whenever pledge also allows stat-family syscalls, i.e. for both rpath and wpath pledges.",https://github.com/jart/cosmopolitan/commit/7d2c363963c58106124c46d66d361ee3908d4af6
jart/cosmopolitan,https://github.com/jart/cosmopolitan,462ba69,Justine Tunney,2024-09-13T13:25:27Z,"Speed up unnamed POSIX semaphores  When sem_wait() used its futexes it would always use process shared mode which can be problematic on platforms like Windows, where that causes it to use the slow futex polyfill. Now when sem_init() is called in private mode that'll be passed along so we can use a faster WaitOnAddress() call",https://github.com/jart/cosmopolitan/commit/462ba6909e3a39053a817bdc013d4b38a79cfd2a
jart/cosmopolitan,https://github.com/jart/cosmopolitan,b5fcb59,Justine Tunney,2024-09-13T12:06:34Z,Implement more bf16/fp16 compiler runtimes  Fixes #1259,https://github.com/jart/cosmopolitan/commit/b5fcb59a851a794a870e91435d75169915cc7141
jart/cosmopolitan,https://github.com/jart/cosmopolitan,6b10f4d,Justine Tunney,2024-09-13T08:47:33Z,"Fix ioctl() and FIONREAD for sockets on Windows  This change fixes an issue where using FIONREAD would cause control flow to jump to null, due to a _weaken() reference that I refactored long ago",https://github.com/jart/cosmopolitan/commit/6b10f4d0b69e961d4945357f6bd6cc7d777dbcb1
jart/cosmopolitan,https://github.com/jart/cosmopolitan,1260f9d,Justine Tunney,2024-09-13T08:10:14Z,Add more tests for strlcpy()  I asked ChatGPT o1 for an optimized version of strlcpy() but it couldn't produce an implementation that didn't crash. Eventually it just gave up.,https://github.com/jart/cosmopolitan/commit/1260f9d0ed6e248cb9e16d66900bf45f23736256
jart/cosmopolitan,https://github.com/jart/cosmopolitan,e142124,Justine Tunney,2024-09-13T06:01:20Z,"Rewrite Windows connect()  Our old code wasn't working with projects like Qt that call connect() in O_NONBLOCK mode multiple times. This change overhauls connect() to use a simpler WSAConnect() API and follows the same pattern as cosmo accept(). This change also reduces the binary footprint of read(), which no longer needs to depend on our enormous clock_gettime() function.",https://github.com/jart/cosmopolitan/commit/e142124730d4be14b738833c42c80a2a2bc4e723
jart/cosmopolitan,https://github.com/jart/cosmopolitan,5469202,Justine Tunney,2024-09-12T12:02:30Z,"Get monorepo fully building on Windows again  The mkdeps tool was failing, because it used a clever mmap() hack that's no longer supported. I've also removed tinymalloc.inc from build tooling because Windows doesn't like the way it uses overcommit memory. Sadly it means our build tool binaries will be larger. It's less of an issue, now that we are no longer putting build tool binaries in the git repository.",https://github.com/jart/cosmopolitan/commit/5469202ea8bbffc28e718f200e600fc594cd59ba
jart/cosmopolitan,https://github.com/jart/cosmopolitan,acd6c32,Justine Tunney,2024-09-12T08:18:14Z,"Rewrite Windows accept()  This change should fix the Windows issues Qt Creator has been having, by ensuring accept() and accept4() work in O_NONBLOCK mode. I switched away from AcceptEx() which is buggy, back to using WSAAccept(). This requires making a tradeoff where we have to accept a busy loop. However it is low latency in nature, just like our new and improved Windows poll() code. I was furthermore able to eliminate a bunch of Windows-related test todos.",https://github.com/jart/cosmopolitan/commit/acd6c321843f81b1d380b656b7457c77541d857d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,6f868fe,Justine Tunney,2024-09-12T00:13:23Z,Fix polling of files on Windows,https://github.com/jart/cosmopolitan/commit/6f868fe1ded4d4137412cc1aae61373e9b0c941a
jart/cosmopolitan,https://github.com/jart/cosmopolitan,0f3457c,Justine Tunney,2024-09-11T09:14:38Z,Add debug log to cosmoaudio and add examples,https://github.com/jart/cosmopolitan/commit/0f3457c1721f8c0278ee5198528c215994141e41
jart/cosmopolitan,https://github.com/jart/cosmopolitan,a5c0189,Justine Tunney,2024-09-11T07:52:34Z,"Make vim startup faster  It appears that GetFileAttributes(u""\\etc\\passwd"") can take two seconds on Windows 10 at unpredictable times for reasons which are mysterious to me. Let's try avoiding that path entirely and pray to Microsoft it works",https://github.com/jart/cosmopolitan/commit/a5c0189bf6fc0a07fb930f279d949a95eb3dded7
jart/cosmopolitan,https://github.com/jart/cosmopolitan,deb5e07,Justine Tunney,2024-09-11T04:21:52Z,"Remove exponential backoff from chdir()  This issue probably only impacted the earliest releases of Windows 7 and we only support Windows 10+ these days, so it's not worth adding 2000 ms of startup latency to vim when ~/.vim doesn't exist.",https://github.com/jart/cosmopolitan/commit/deb5e07b5a74f43c6b3b9504215ab6acca28886d
jart/cosmopolitan,https://github.com/jart/cosmopolitan,4d05060,Gabriel Ravier,2024-09-11T03:42:52Z,"Partially fix printf hex float numbers/%a rounding (#1286)  Hexadecimal printing of floating-point numbers in cosmopolitan (that is, using the the conversion specifier) is improved to have correct rounding of results in rounding modes other than the default one (ie. FE_NEAREST)  This commit fixes that, and adds tests for the change (note that there's still some rounding issues with the a conversion specifier in general in relatively rare cases (that is without non-default rounding modes) where I've left commented-out tests for anyone interested in improving it more",https://github.com/jart/cosmopolitan/commit/4d05060aaca061df84434d6705a846fea25578f9
